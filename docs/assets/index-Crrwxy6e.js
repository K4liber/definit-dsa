(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();class hr extends Map{constructor(e,n=gr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Ze(this,e))}has(e){return super.has(Ze(this,e))}set(e,n){return super.set(dr(this,e),n)}delete(e){return super.delete(pr(this,e))}}function Ze({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function dr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function pr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function gr(t){return t!==null&&typeof t=="object"?t.valueOf():t}function je(t){return t}function mr(t,...e){return yr(t,je,je,e)}function yr(t,e,n,r){return(function i(o,s){if(s>=r.length)return n(o);const a=new hr,c=r[s++];let u=-1;for(const f of o){const l=c(f,++u,o),h=a.get(l);h?h.push(f):a.set(l,[f])}for(const[f,l]of a)a.set(f,i(l,s));return e(a)})(t,0)}function xn(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}var vr={value:()=>{}};function ze(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ht(n)}function Ht(t){this._=t}function wr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ht.prototype=ze.prototype={constructor:Ht,on:function(t,e){var n=this._,r=wr(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=_r(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=tn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=tn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ht(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function _r(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function tn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=vr,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ke="http://www.w3.org/1999/xhtml";const en={svg:"http://www.w3.org/2000/svg",xhtml:ke,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function re(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),en.hasOwnProperty(e)?{space:en[e],local:t}:t}function xr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ke&&e.documentElement.namespaceURI===ke?e.createElement(t):e.createElementNS(n,t)}}function br(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bn(t){var e=re(t);return(e.local?br:xr)(e)}function kr(){}function Re(t){return t==null?kr:function(){return this.querySelector(t)}}function Er(t){typeof t!="function"&&(t=Re(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,u,f=0;f<s;++f)(c=o[f])&&(u=t.call(c,c.__data__,f,o))&&("__data__"in c&&(u.__data__=c.__data__),a[f]=u);return new O(r,this._parents)}function Sr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ir(){return[]}function kn(t){return t==null?Ir:function(){return this.querySelectorAll(t)}}function Mr(t){return function(){return Sr(t.apply(this,arguments))}}function Ar(t){typeof t=="function"?t=Mr(t):t=kn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(t.call(c,c.__data__,u,s)),i.push(c));return new O(r,i)}function En(t){return function(){return this.matches(t)}}function Sn(t){return function(e){return e.matches(t)}}var Lr=Array.prototype.find;function Nr(t){return function(){return Lr.call(this.children,t)}}function Cr(){return this.firstElementChild}function $r(t){return this.select(t==null?Cr:Nr(typeof t=="function"?t:Sn(t)))}var Tr=Array.prototype.filter;function Pr(){return Array.from(this.children)}function zr(t){return function(){return Tr.call(this.children,t)}}function Rr(t){return this.selectAll(t==null?Pr:zr(typeof t=="function"?t:Sn(t)))}function Br(t){typeof t!="function"&&(t=En(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,u=0;u<s;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&a.push(c);return new O(r,this._parents)}function In(t){return new Array(t.length)}function Dr(){return new O(this._enter||this._groups.map(In),this._parents)}function Kt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Kt.prototype={constructor:Kt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Or(t){return function(){return t}}function Fr(t,e,n,r,i,o){for(var s=0,a,c=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Kt(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function qr(t,e,n,r,i,o,s){var a,c,u=new Map,f=e.length,l=o.length,h=new Array(f),d;for(a=0;a<f;++a)(c=e[a])&&(h[a]=d=s.call(c,c.__data__,a,e)+"",u.has(d)?i[a]=c:u.set(d,c));for(a=0;a<l;++a)d=s.call(t,o[a],a,o)+"",(c=u.get(d))?(r[a]=c,c.__data__=o[a],u.delete(d)):n[a]=new Kt(t,o[a]);for(a=0;a<f;++a)(c=e[a])&&u.get(h[a])===c&&(i[a]=c)}function Hr(t){return t.__data__}function Xr(t,e){if(!arguments.length)return Array.from(this,Hr);var n=e?qr:Fr,r=this._parents,i=this._groups;typeof t!="function"&&(t=Or(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),u=0;u<o;++u){var f=r[u],l=i[u],h=l.length,d=Vr(t.call(f,f&&f.__data__,u,r)),m=d.length,_=a[u]=new Array(m),w=s[u]=new Array(m),y=c[u]=new Array(h);n(f,l,_,w,y,d,e);for(var I=0,C=0,k,M;I<m;++I)if(k=_[I]){for(I>=C&&(C=I+1);!(M=w[C])&&++C<m;);k._next=M||null}}return s=new O(s,r),s._enter=a,s._exit=c,s}function Vr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Yr(){return new O(this._exit||this._groups.map(In),this._parents)}function Gr(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Kr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var u=n[c],f=r[c],l=u.length,h=a[c]=new Array(l),d,m=0;m<l;++m)(d=u[m]||f[m])&&(h[m]=d);for(;c<i;++c)a[c]=n[c];return new O(a,this._parents)}function Ur(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Wr(t){t||(t=Jr);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),u,f=0;f<a;++f)(u=s[f])&&(c[f]=u);c.sort(e)}return new O(i,this._parents).order()}function Jr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Zr(){return Array.from(this)}function jr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ti(){let t=0;for(const e of this)++t;return t}function ei(){return!this.node()}function ni(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function ri(t){return function(){this.removeAttribute(t)}}function ii(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oi(t,e){return function(){this.setAttribute(t,e)}}function si(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ai(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ci(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function li(t,e){var n=re(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ii:ri:typeof e=="function"?n.local?ci:ai:n.local?si:oi)(n,e))}function Mn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ui(t){return function(){this.style.removeProperty(t)}}function fi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function hi(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function di(t,e,n){return arguments.length>1?this.each((e==null?ui:typeof e=="function"?hi:fi)(t,e,n??"")):xt(this.node(),t)}function xt(t,e){return t.style.getPropertyValue(e)||Mn(t).getComputedStyle(t,null).getPropertyValue(e)}function pi(t){return function(){delete this[t]}}function gi(t,e){return function(){this[t]=e}}function mi(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function yi(t,e){return arguments.length>1?this.each((e==null?pi:typeof e=="function"?mi:gi)(t,e)):this.node()[t]}function An(t){return t.trim().split(/^|\s+/)}function Be(t){return t.classList||new Ln(t)}function Ln(t){this._node=t,this._names=An(t.getAttribute("class")||"")}Ln.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Nn(t,e){for(var n=Be(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Cn(t,e){for(var n=Be(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function vi(t){return function(){Nn(this,t)}}function wi(t){return function(){Cn(this,t)}}function _i(t,e){return function(){(e.apply(this,arguments)?Nn:Cn)(this,t)}}function xi(t,e){var n=An(t+"");if(arguments.length<2){for(var r=Be(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?_i:e?vi:wi)(n,e))}function bi(){this.textContent=""}function ki(t){return function(){this.textContent=t}}function Ei(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Si(t){return arguments.length?this.each(t==null?bi:(typeof t=="function"?Ei:ki)(t)):this.node().textContent}function Ii(){this.innerHTML=""}function Mi(t){return function(){this.innerHTML=t}}function Ai(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Li(t){return arguments.length?this.each(t==null?Ii:(typeof t=="function"?Ai:Mi)(t)):this.node().innerHTML}function Ni(){this.nextSibling&&this.parentNode.appendChild(this)}function Ci(){return this.each(Ni)}function $i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ti(){return this.each($i)}function Pi(t){var e=typeof t=="function"?t:bn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function zi(){return null}function Ri(t,e){var n=typeof t=="function"?t:bn(t),r=e==null?zi:typeof e=="function"?e:Re(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Bi(){var t=this.parentNode;t&&t.removeChild(this)}function Di(){return this.each(Bi)}function Oi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Fi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qi(t){return this.select(t?Fi:Oi)}function Hi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Xi(t){return function(e){t.call(this,e,this.__data__)}}function Vi(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Yi(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Gi(t,e,n){return function(){var r=this.__on,i,o=Xi(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ki(t,e,n){var r=Vi(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,f;c<u;++c)for(i=0,f=a[c];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=e?Gi:Yi,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function $n(t,e,n){var r=Mn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ui(t,e){return function(){return $n(this,t,e)}}function Wi(t,e){return function(){return $n(this,t,e.apply(this,arguments))}}function Ji(t,e){return this.each((typeof e=="function"?Wi:Ui)(t,e))}function*Qi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Tn=[null];function O(t,e){this._groups=t,this._parents=e}function Pt(){return new O([[document.documentElement]],Tn)}function Zi(){return this}O.prototype=Pt.prototype={constructor:O,select:Er,selectAll:Ar,selectChild:$r,selectChildren:Rr,filter:Br,data:Xr,enter:Dr,exit:Yr,join:Gr,merge:Kr,selection:Zi,order:Ur,sort:Wr,call:Qr,nodes:Zr,node:jr,size:ti,empty:ei,each:ni,attr:li,style:di,property:yi,classed:xi,text:Si,html:Li,raise:Ci,lower:Ti,append:Pi,insert:Ri,remove:Di,clone:qi,datum:Hi,on:Ki,dispatch:Ji,[Symbol.iterator]:Qi};function Y(t){return typeof t=="string"?new O([[document.querySelector(t)]],[document.documentElement]):new O([[t]],Tn)}function ji(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ut(t,e){if(t=ji(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ee={capture:!0,passive:!1};function Se(t){t.preventDefault(),t.stopImmediatePropagation()}function to(t){var e=t.document.documentElement,n=Y(t).on("dragstart.drag",Se,Ee);"onselectstart"in e?n.on("selectstart.drag",Se,Ee):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function eo(t,e){var n=t.document.documentElement,r=Y(t).on("dragstart.drag",null);e&&(r.on("click.drag",Se,Ee),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function De(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Pn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function zt(){}var At=.7,Ut=1/At,wt="\\s*([+-]?\\d+)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",K="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",no=/^#([0-9a-f]{3,8})$/,ro=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),io=new RegExp(`^rgb\\(${K},${K},${K}\\)$`),oo=new RegExp(`^rgba\\(${wt},${wt},${wt},${Lt}\\)$`),so=new RegExp(`^rgba\\(${K},${K},${K},${Lt}\\)$`),ao=new RegExp(`^hsl\\(${Lt},${K},${K}\\)$`),co=new RegExp(`^hsla\\(${Lt},${K},${K},${Lt}\\)$`),nn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};De(zt,Nt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rn,formatHex:rn,formatHex8:lo,formatHsl:uo,formatRgb:on,toString:on});function rn(){return this.rgb().formatHex()}function lo(){return this.rgb().formatHex8()}function uo(){return zn(this).formatHsl()}function on(){return this.rgb().formatRgb()}function Nt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=no.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?sn(e):n===3?new D(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ro.exec(t))?new D(e[1],e[2],e[3],1):(e=io.exec(t))?new D(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=oo.exec(t))?Bt(e[1],e[2],e[3],e[4]):(e=so.exec(t))?Bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ao.exec(t))?ln(e[1],e[2]/100,e[3]/100,1):(e=co.exec(t))?ln(e[1],e[2]/100,e[3]/100,e[4]):nn.hasOwnProperty(t)?sn(nn[t]):t==="transparent"?new D(NaN,NaN,NaN,0):null}function sn(t){return new D(t>>16&255,t>>8&255,t&255,1)}function Bt(t,e,n,r){return r<=0&&(t=e=n=NaN),new D(t,e,n,r)}function fo(t){return t instanceof zt||(t=Nt(t)),t?(t=t.rgb(),new D(t.r,t.g,t.b,t.opacity)):new D}function Ie(t,e,n,r){return arguments.length===1?fo(t):new D(t,e,n,r??1)}function D(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}De(D,Ie,Pn(zt,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?At:Math.pow(At,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new D(dt(this.r),dt(this.g),dt(this.b),Wt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:an,formatHex:an,formatHex8:ho,formatRgb:cn,toString:cn}));function an(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function ho(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function cn(){const t=Wt(this.opacity);return`${t===1?"rgb(":"rgba("}${dt(this.r)}, ${dt(this.g)}, ${dt(this.b)}${t===1?")":`, ${t})`}`}function Wt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ht(t){return t=dt(t),(t<16?"0":"")+t.toString(16)}function ln(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new H(t,e,n,r)}function zn(t){if(t instanceof H)return new H(t.h,t.s,t.l,t.opacity);if(t instanceof zt||(t=Nt(t)),!t)return new H;if(t instanceof H)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new H(s,a,c,t.opacity)}function po(t,e,n,r){return arguments.length===1?zn(t):new H(t,e,n,r??1)}function H(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}De(H,po,Pn(zt,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new H(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?At:Math.pow(At,t),new H(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new D(fe(t>=240?t-240:t+120,i,r),fe(t,i,r),fe(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new H(un(this.h),Dt(this.s),Dt(this.l),Wt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wt(this.opacity);return`${t===1?"hsl(":"hsla("}${un(this.h)}, ${Dt(this.s)*100}%, ${Dt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function un(t){return t=(t||0)%360,t<0?t+360:t}function Dt(t){return Math.max(0,Math.min(1,t||0))}function fe(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Rn=t=>()=>t;function go(t,e){return function(n){return t+n*e}}function mo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yo(t){return(t=+t)==1?Bn:function(e,n){return n-e?mo(e,n,t):Rn(isNaN(e)?n:e)}}function Bn(t,e){var n=e-t;return n?go(t,n):Rn(isNaN(t)?e:t)}const fn=(function t(e){var n=yo(e);function r(i,o){var s=n((i=Ie(i)).r,(o=Ie(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),u=Bn(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function at(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Me=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,he=new RegExp(Me.source,"g");function vo(t){return function(){return t}}function wo(t){return function(e){return t(e)+""}}function _o(t,e){var n=Me.lastIndex=he.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Me.exec(t))&&(i=he.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:at(r,i)})),n=he.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?wo(c[0].x):vo(e):(e=c.length,function(u){for(var f=0,l;f<e;++f)a[(l=c[f]).i]=l.x(u);return a.join("")})}var hn=180/Math.PI,Ae={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dn(t,e,n,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*hn,skewX:Math.atan(c)*hn,scaleX:s,scaleY:a}}var Ot;function xo(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ae:Dn(e.a,e.b,e.c,e.d,e.e,e.f)}function bo(t){return t==null||(Ot||(Ot=document.createElementNS("http://www.w3.org/2000/svg","g")),Ot.setAttribute("transform",t),!(t=Ot.transform.baseVal.consolidate()))?Ae:(t=t.matrix,Dn(t.a,t.b,t.c,t.d,t.e,t.f))}function On(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,l,h,d,m){if(u!==l||f!==h){var _=d.push("translate(",null,e,null,n);m.push({i:_-4,x:at(u,l)},{i:_-2,x:at(f,h)})}else(l||h)&&d.push("translate("+l+e+h+n)}function s(u,f,l,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:l.push(i(l)+"rotate(",null,r)-2,x:at(u,f)})):f&&l.push(i(l)+"rotate("+f+r)}function a(u,f,l,h){u!==f?h.push({i:l.push(i(l)+"skewX(",null,r)-2,x:at(u,f)}):f&&l.push(i(l)+"skewX("+f+r)}function c(u,f,l,h,d,m){if(u!==l||f!==h){var _=d.push(i(d)+"scale(",null,",",null,")");m.push({i:_-4,x:at(u,l)},{i:_-2,x:at(f,h)})}else(l!==1||h!==1)&&d.push(i(d)+"scale("+l+","+h+")")}return function(u,f){var l=[],h=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,l,h),s(u.rotate,f.rotate,l,h),a(u.skewX,f.skewX,l,h),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,l,h),u=f=null,function(d){for(var m=-1,_=h.length,w;++m<_;)l[(w=h[m]).i]=w.x(d);return l.join("")}}}var ko=On(xo,"px, ","px)","deg)"),Eo=On(bo,", ",")",")"),So=1e-12;function dn(t){return((t=Math.exp(t))+1/t)/2}function Io(t){return((t=Math.exp(t))-1/t)/2}function Mo(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ao=(function t(e,n,r){function i(o,s){var a=o[0],c=o[1],u=o[2],f=s[0],l=s[1],h=s[2],d=f-a,m=l-c,_=d*d+m*m,w,y;if(_<So)y=Math.log(h/u)/e,w=function(B){return[a+B*d,c+B*m,u*Math.exp(e*B*y)]};else{var I=Math.sqrt(_),C=(h*h-u*u+r*_)/(2*u*n*I),k=(h*h-u*u-r*_)/(2*h*n*I),M=Math.log(Math.sqrt(C*C+1)-C),L=Math.log(Math.sqrt(k*k+1)-k);y=(L-M)/e,w=function(B){var st=B*y,W=dn(M),lt=u/(n*I)*(W*Mo(e*st+M)-Io(M));return[a+lt*d,c+lt*m,u*W/dn(e*st+M)]}}return w.duration=y*1e3*e/Math.SQRT2,w}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return t(s,a,c)},i})(Math.SQRT2,2,4);var bt=0,St=0,kt=0,Fn=1e3,Jt,It,Qt=0,pt=0,ie=0,Ct=typeof performance=="object"&&performance.now?performance:Date,qn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Oe(){return pt||(qn(Lo),pt=Ct.now()+ie)}function Lo(){pt=0}function Zt(){this._call=this._time=this._next=null}Zt.prototype=Hn.prototype={constructor:Zt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Oe():+n)+(e==null?0:+e),!this._next&&It!==this&&(It?It._next=this:Jt=this,It=this),this._call=t,this._time=n,Le()},stop:function(){this._call&&(this._call=null,this._time=1/0,Le())}};function Hn(t,e,n){var r=new Zt;return r.restart(t,e,n),r}function No(){Oe(),++bt;for(var t=Jt,e;t;)(e=pt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--bt}function pn(){pt=(Qt=Ct.now())+ie,bt=St=0;try{No()}finally{bt=0,$o(),pt=0}}function Co(){var t=Ct.now(),e=t-Qt;e>Fn&&(ie-=e,Qt=t)}function $o(){for(var t,e=Jt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Jt=n);It=t,Le(r)}function Le(t){if(!bt){St&&(St=clearTimeout(St));var e=t-pt;e>24?(t<1/0&&(St=setTimeout(pn,t-Ct.now()-ie)),kt&&(kt=clearInterval(kt))):(kt||(Qt=Ct.now(),kt=setInterval(Co,Fn)),bt=1,qn(pn))}}function gn(t,e,n){var r=new Zt;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var To=ze("start","end","cancel","interrupt"),Po=[],Xn=0,mn=1,Ne=2,Xt=3,yn=4,Ce=5,Vt=6;function oe(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;zo(t,n,{name:e,index:r,group:i,on:To,tween:Po,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Xn})}function Fe(t,e){var n=X(t,e);if(n.state>Xn)throw new Error("too late; already scheduled");return n}function U(t,e){var n=X(t,e);if(n.state>Xt)throw new Error("too late; already running");return n}function X(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function zo(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Hn(o,0,n.time);function o(u){n.state=mn,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,l,h,d;if(n.state!==mn)return c();for(f in r)if(d=r[f],d.name===n.name){if(d.state===Xt)return gn(s);d.state===yn?(d.state=Vt,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[f]):+f<e&&(d.state=Vt,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[f])}if(gn(function(){n.state===Xt&&(n.state=yn,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Ne,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ne){for(n.state=Xt,i=new Array(h=n.tween.length),f=0,l=-1;f<h;++f)(d=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++l]=d);i.length=l+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Ce,1),l=-1,h=i.length;++l<h;)i[l].call(t,f);n.state===Ce&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Vt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Yt(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>Ne&&r.state<Ce,r.state=Vt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Ro(t){return this.each(function(){Yt(this,t)})}function Bo(t,e){var n,r;return function(){var i=U(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Do(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=U(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=a;break}c===u&&i.push(a)}o.tween=i}}function Oo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=X(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Bo:Do)(n,t,e))}function qe(t,e,n){var r=t._id;return t.each(function(){var i=U(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return X(i,r).value[e]}}function Vn(t,e){var n;return(typeof e=="number"?at:e instanceof Nt?fn:(n=Nt(e))?(e=n,fn):_o)(t,e)}function Fo(t){return function(){this.removeAttribute(t)}}function qo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ho(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Xo(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Vo(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function Yo(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function Go(t,e){var n=re(t),r=n==="transform"?Eo:Vn;return this.attrTween(t,typeof e=="function"?(n.local?Yo:Vo)(n,r,qe(this,"attr."+t,e)):e==null?(n.local?qo:Fo)(n):(n.local?Xo:Ho)(n,r,e))}function Ko(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Uo(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Wo(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Uo(t,o)),n}return i._value=e,i}function Jo(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Ko(t,o)),n}return i._value=e,i}function Qo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=re(t);return this.tween(n,(r.local?Wo:Jo)(r,e))}function Zo(t,e){return function(){Fe(this,t).delay=+e.apply(this,arguments)}}function jo(t,e){return e=+e,function(){Fe(this,t).delay=e}}function ts(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zo:jo)(e,t)):X(this.node(),e).delay}function es(t,e){return function(){U(this,t).duration=+e.apply(this,arguments)}}function ns(t,e){return e=+e,function(){U(this,t).duration=e}}function rs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?es:ns)(e,t)):X(this.node(),e).duration}function is(t,e){if(typeof e!="function")throw new Error;return function(){U(this,t).ease=e}}function os(t){var e=this._id;return arguments.length?this.each(is(e,t)):X(this.node(),e).ease}function ss(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;U(this,t).ease=n}}function as(t){if(typeof t!="function")throw new Error;return this.each(ss(this._id,t))}function cs(t){typeof t!="function"&&(t=En(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,u=0;u<s;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&a.push(c);return new ot(r,this._parents,this._name,this._id)}function ls(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],u=n[a],f=c.length,l=s[a]=new Array(f),h,d=0;d<f;++d)(h=c[d]||u[d])&&(l[d]=h);for(;a<r;++a)s[a]=e[a];return new ot(s,this._parents,this._name,this._id)}function us(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function fs(t,e,n){var r,i,o=us(e)?Fe:U;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function hs(t,e){var n=this._id;return arguments.length<2?X(this.node(),n).on.on(t):this.each(fs(n,t,e))}function ds(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ps(){return this.on("end.remove",ds(this._id))}function gs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Re(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,u=o[s]=new Array(c),f,l,h=0;h<c;++h)(f=a[h])&&(l=t.call(f,f.__data__,h,a))&&("__data__"in f&&(l.__data__=f.__data__),u[h]=l,oe(u[h],e,n,h,u,X(f,n)));return new ot(o,this._parents,e,n)}function ms(t){var e=this._name,n=this._id;typeof t!="function"&&(t=kn(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],u=c.length,f,l=0;l<u;++l)if(f=c[l]){for(var h=t.call(f,f.__data__,l,c),d,m=X(f,n),_=0,w=h.length;_<w;++_)(d=h[_])&&oe(d,e,n,_,h,m);o.push(h),s.push(f)}return new ot(o,s,e,n)}var ys=Pt.prototype.constructor;function vs(){return new ys(this._groups,this._parents)}function ws(t,e){var n,r,i;return function(){var o=xt(this,t),s=(this.style.removeProperty(t),xt(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Yn(t){return function(){this.style.removeProperty(t)}}function _s(t,e,n){var r,i=n+"",o;return function(){var s=xt(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function xs(t,e,n){var r,i,o;return function(){var s=xt(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),xt(this,t))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function bs(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var c=U(this,t),u=c.on,f=c.value[o]==null?a||(a=Yn(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(s,i=f),c.on=r}}function ks(t,e,n){var r=(t+="")=="transform"?ko:Vn;return e==null?this.styleTween(t,ws(t,r)).on("end.style."+t,Yn(t)):typeof e=="function"?this.styleTween(t,xs(t,r,qe(this,"style."+t,e))).each(bs(this._id,t)):this.styleTween(t,_s(t,r,e),n).on("end.style."+t,null)}function Es(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ss(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Es(t,s,n)),r}return o._value=e,o}function Is(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ss(t,e,n??""))}function Ms(t){return function(){this.textContent=t}}function As(t){return function(){var e=t(this);this.textContent=e??""}}function Ls(t){return this.tween("text",typeof t=="function"?As(qe(this,"text",t)):Ms(t==null?"":t+""))}function Ns(t){return function(e){this.textContent=t.call(this,e)}}function Cs(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ns(i)),e}return r._value=t,r}function $s(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Cs(t))}function Ts(){for(var t=this._name,e=this._id,n=Gn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var f=X(c,e);oe(c,t,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ot(r,this._parents,t,n)}function Ps(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var u=U(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),u.on=e}),i===0&&o()})}var zs=0;function ot(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Gn(){return++zs}var Z=Pt.prototype;ot.prototype={constructor:ot,select:gs,selectAll:ms,selectChild:Z.selectChild,selectChildren:Z.selectChildren,filter:cs,merge:ls,selection:vs,transition:Ts,call:Z.call,nodes:Z.nodes,node:Z.node,size:Z.size,empty:Z.empty,each:Z.each,on:hs,attr:Go,attrTween:Qo,style:ks,styleTween:Is,text:Ls,textTween:$s,remove:ps,tween:Oo,delay:ts,duration:rs,ease:os,easeVarying:as,end:Ps,[Symbol.iterator]:Z[Symbol.iterator]};function Rs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Bs={time:null,delay:0,duration:250,ease:Rs};function Ds(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Os(t){var e,n;t instanceof ot?(e=t._id,t=t._name):(e=Gn(),(n=Bs).time=Oe(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&oe(c,t,e,u,s,n||Ds(c,e));return new ot(r,this._parents,t,e)}Pt.prototype.interrupt=Ro;Pt.prototype.transition=Os;const Ft=t=>()=>t;function Fs(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function nt(t,e,n){this.k=t,this.x=e,this.y=n}nt.prototype={constructor:nt,scale:function(t){return t===1?this:new nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var se=new nt(1,0,0);Kn.prototype=nt.prototype;function Kn(t){for(;!t.__zoom;)if(!(t=t.parentNode))return se;return t.__zoom}function de(t){t.stopImmediatePropagation()}function Et(t){t.preventDefault(),t.stopImmediatePropagation()}function qs(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Hs(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function vn(){return this.__zoom||se}function Xs(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Vs(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ys(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Gs(){var t=qs,e=Hs,n=Ys,r=Xs,i=Vs,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Ao,u=ze("start","zoom","end"),f,l,h,d=500,m=150,_=0,w=10;function y(p){p.property("__zoom",vn).on("wheel.zoom",st,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",lt).filter(i).on("touchstart.zoom",Rt).on("touchmove.zoom",ur).on("touchend.zoom touchcancel.zoom",fr).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(p,v,g,x){var b=p.selection?p.selection():p;b.property("__zoom",vn),p!==b?M(p,v,g,x):b.interrupt().each(function(){L(this,arguments).event(x).start().zoom(null,typeof v=="function"?v.apply(this,arguments):v).end()})},y.scaleBy=function(p,v,g,x){y.scaleTo(p,function(){var b=this.__zoom.k,E=typeof v=="function"?v.apply(this,arguments):v;return b*E},g,x)},y.scaleTo=function(p,v,g,x){y.transform(p,function(){var b=e.apply(this,arguments),E=this.__zoom,S=g==null?k(b):typeof g=="function"?g.apply(this,arguments):g,N=E.invert(S),$=typeof v=="function"?v.apply(this,arguments):v;return n(C(I(E,$),S,N),b,s)},g,x)},y.translateBy=function(p,v,g,x){y.transform(p,function(){return n(this.__zoom.translate(typeof v=="function"?v.apply(this,arguments):v,typeof g=="function"?g.apply(this,arguments):g),e.apply(this,arguments),s)},null,x)},y.translateTo=function(p,v,g,x,b){y.transform(p,function(){var E=e.apply(this,arguments),S=this.__zoom,N=x==null?k(E):typeof x=="function"?x.apply(this,arguments):x;return n(se.translate(N[0],N[1]).scale(S.k).translate(typeof v=="function"?-v.apply(this,arguments):-v,typeof g=="function"?-g.apply(this,arguments):-g),E,s)},x,b)};function I(p,v){return v=Math.max(o[0],Math.min(o[1],v)),v===p.k?p:new nt(v,p.x,p.y)}function C(p,v,g){var x=v[0]-g[0]*p.k,b=v[1]-g[1]*p.k;return x===p.x&&b===p.y?p:new nt(p.k,x,b)}function k(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function M(p,v,g,x){p.on("start.zoom",function(){L(this,arguments).event(x).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(x).end()}).tween("zoom",function(){var b=this,E=arguments,S=L(b,E).event(x),N=e.apply(b,E),$=g==null?k(N):typeof g=="function"?g.apply(b,E):g,V=Math.max(N[1][0]-N[0][0],N[1][1]-N[0][1]),z=b.__zoom,F=typeof v=="function"?v.apply(b,E):v,J=c(z.invert($).concat(V/z.k),F.invert($).concat(V/F.k));return function(q){if(q===1)q=F;else{var Q=J(q),ue=V/Q[2];q=new nt(ue,$[0]-Q[0]*ue,$[1]-Q[1]*ue)}S.zoom(null,q)}})}function L(p,v,g){return!g&&p.__zooming||new B(p,v)}function B(p,v){this.that=p,this.args=v,this.active=0,this.sourceEvent=null,this.extent=e.apply(p,v),this.taps=0}B.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,v){return this.mouse&&p!=="mouse"&&(this.mouse[1]=v.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=v.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=v.invert(this.touch1[0])),this.that.__zoom=v,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var v=Y(this.that).datum();u.call(p,this.that,new Fs(p,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),v)}};function st(p,...v){if(!t.apply(this,arguments))return;var g=L(this,v).event(p),x=this.__zoom,b=Math.max(o[0],Math.min(o[1],x.k*Math.pow(2,r.apply(this,arguments)))),E=ut(p);if(g.wheel)(g.mouse[0][0]!==E[0]||g.mouse[0][1]!==E[1])&&(g.mouse[1]=x.invert(g.mouse[0]=E)),clearTimeout(g.wheel);else{if(x.k===b)return;g.mouse=[E,x.invert(E)],Yt(this),g.start()}Et(p),g.wheel=setTimeout(S,m),g.zoom("mouse",n(C(I(x,b),g.mouse[0],g.mouse[1]),g.extent,s));function S(){g.wheel=null,g.end()}}function W(p,...v){if(h||!t.apply(this,arguments))return;var g=p.currentTarget,x=L(this,v,!0).event(p),b=Y(p.view).on("mousemove.zoom",$,!0).on("mouseup.zoom",V,!0),E=ut(p,g),S=p.clientX,N=p.clientY;to(p.view),de(p),x.mouse=[E,this.__zoom.invert(E)],Yt(this),x.start();function $(z){if(Et(z),!x.moved){var F=z.clientX-S,J=z.clientY-N;x.moved=F*F+J*J>_}x.event(z).zoom("mouse",n(C(x.that.__zoom,x.mouse[0]=ut(z,g),x.mouse[1]),x.extent,s))}function V(z){b.on("mousemove.zoom mouseup.zoom",null),eo(z.view,x.moved),Et(z),x.event(z).end()}}function lt(p,...v){if(t.apply(this,arguments)){var g=this.__zoom,x=ut(p.changedTouches?p.changedTouches[0]:p,this),b=g.invert(x),E=g.k*(p.shiftKey?.5:2),S=n(C(I(g,E),x,b),e.apply(this,v),s);Et(p),a>0?Y(this).transition().duration(a).call(M,S,x,p):Y(this).call(y.transform,S,x,p)}}function Rt(p,...v){if(t.apply(this,arguments)){var g=p.touches,x=g.length,b=L(this,v,p.changedTouches.length===x).event(p),E,S,N,$;for(de(p),S=0;S<x;++S)N=g[S],$=ut(N,this),$=[$,this.__zoom.invert($),N.identifier],b.touch0?!b.touch1&&b.touch0[2]!==$[2]&&(b.touch1=$,b.taps=0):(b.touch0=$,E=!0,b.taps=1+!!f);f&&(f=clearTimeout(f)),E&&(b.taps<2&&(l=$[0],f=setTimeout(function(){f=null},d)),Yt(this),b.start())}}function ur(p,...v){if(this.__zooming){var g=L(this,v).event(p),x=p.changedTouches,b=x.length,E,S,N,$;for(Et(p),E=0;E<b;++E)S=x[E],N=ut(S,this),g.touch0&&g.touch0[2]===S.identifier?g.touch0[0]=N:g.touch1&&g.touch1[2]===S.identifier&&(g.touch1[0]=N);if(S=g.that.__zoom,g.touch1){var V=g.touch0[0],z=g.touch0[1],F=g.touch1[0],J=g.touch1[1],q=(q=F[0]-V[0])*q+(q=F[1]-V[1])*q,Q=(Q=J[0]-z[0])*Q+(Q=J[1]-z[1])*Q;S=I(S,Math.sqrt(q/Q)),N=[(V[0]+F[0])/2,(V[1]+F[1])/2],$=[(z[0]+J[0])/2,(z[1]+J[1])/2]}else if(g.touch0)N=g.touch0[0],$=g.touch0[1];else return;g.zoom("touch",n(C(S,N,$),g.extent,s))}}function fr(p,...v){if(this.__zooming){var g=L(this,v).event(p),x=p.changedTouches,b=x.length,E,S;for(de(p),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),E=0;E<b;++E)S=x[E],g.touch0&&g.touch0[2]===S.identifier?delete g.touch0:g.touch1&&g.touch1[2]===S.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(S=ut(S,this),Math.hypot(l[0]-S[0],l[1]-S[1])<w)){var N=Y(this).on("dblclick.zoom");N&&N.apply(this,arguments)}}}return y.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:Ft(+p),y):r},y.filter=function(p){return arguments.length?(t=typeof p=="function"?p:Ft(!!p),y):t},y.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:Ft(!!p),y):i},y.extent=function(p){return arguments.length?(e=typeof p=="function"?p:Ft([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),y):e},y.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],y):[o[0],o[1]]},y.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(p){return arguments.length?(n=p,y):n},y.duration=function(p){return arguments.length?(a=+p,y):a},y.interpolate=function(p){return arguments.length?(c=p,y):c},y.on=function(){var p=u.on.apply(u,arguments);return p===u?y:p},y.clickDistance=function(p){return arguments.length?(_=(p=+p)*p,y):Math.sqrt(_)},y.tapDistance=function(p){return arguments.length?(w=+p,y):w},y}let T=null;const gt=Y("#viz"),Un=()=>gt.node().clientWidth,Wn=()=>gt.node().clientHeight,ae=gt.append("g"),Jn=ae.append("g").attr("class","rings"),Ks=ae.append("g").attr("class","links"),pe=ae.append("g").attr("class","nodes"),He=Gs().scaleExtent([.1,6]).on("zoom",t=>{ae.attr("transform",t.transform.toString())});gt.call(He);function wn(t){return t.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_\-\/]/g,"")}function Xe(t){const e=(T==null?void 0:T.def.nodes.length)??t.nodes.length,n=rt.size,r=T?T.def.edges:t.edges,i=r.length,o=r.reduce((d,m)=>d+(rt.has(m.target)?1:0),0),s=T?T.def.nodes:t.nodes,a=Math.max(0,...s.map(d=>d.level??0)),c=new Map,u=new Map;for(const d of s){const m=d.level??0;c.set(m,(c.get(m)??0)+1),rt.has(d.id)&&u.set(m,(u.get(m)??0)+1)}let f=0;for(let d=0;d<=a;d++){const m=c.get(d)??0;if(!m)continue;(u.get(d)??0)===m&&f++}const l=document.getElementById("stats");if(!l)return;l.innerHTML="";const h=[["Definitions learned",`${n} out of ${e}`],["Edges unlocked",`${o} out of ${i}`],["Levels completed",`${f} out of ${a+1}`]];for(const[d,m]of h){const _=document.createElement("div");_.textContent=d;const w=document.createElement("div");w.textContent=m,l.appendChild(_),l.appendChild(w)}}let Ve=null,G=null;function ce(){let t=Ve;if(t===null&&G&&A){const e=A.nodes.find(n=>n.id===G);t=(e==null?void 0:e.level)??null}Jn.selectAll("circle.ring").classed("hovered",e=>t!==null&&e.level===t)}function jt(t){Ve=t,ce()}function Us(t){return Math.max(24,t.length*7.2)}function Ws(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return(e>>>0)/4294967295}const Js="rgba(148, 163, 184, 0.18)",Qs="rgba(148, 163, 184, 0.8)",Zs="#fbbf24",js="#22c55e",Ye="definit-db.learned",Ge="definit-db.ui.includedIds";function $e(){try{const t=localStorage.getItem(Ge);if(!t)return null;const e=JSON.parse(t);return Array.isArray(e)?new Set(e.filter(n=>typeof n=="string")):null}catch{return null}}function Qn(t){try{localStorage.setItem(Ge,JSON.stringify(Array.from(t)))}catch{}}function ta(){try{const t=localStorage.getItem(Ye);if(!t)return new Set;const e=JSON.parse(t);return Array.isArray(e)?new Set(e.filter(n=>typeof n=="string")):new Set}catch{return new Set}}function Zn(){try{localStorage.setItem(Ye,JSON.stringify(Array.from(rt)))}catch{}}function ea(){rt.clear();try{localStorage.removeItem(Ye)}catch{}}const rt=ta(),na=`Welcome to the "Data Structures and Algorithms" course!

This is a great starting point if you are preparing for coding interviews. The tool helps you learn or review key definitions related to data structures and algorithms.

The definitions are based on Cracking the Coding Interview by Gayle Laakmann McDowell. A total of 275 terms from mathematics and computer science are organized topologically to create a smooth and logical learning experience.

Give it a try, take it easy, and have fun! Feedback is always appreciated. Feel free to contact me at janbielecki94@gmail.com.`;function Ke(){return rt.size>0}function te(){const t=document.getElementById("resetProgress")??document.getElementById("reset");t&&(t.disabled=!Ke(),t.title=t.disabled?"Nothing to reset yet":"Reset progress")}function ra(){const t=document.getElementById("infoOverlay"),e=document.getElementById("infoFab"),n=document.getElementById("infoClose"),r=document.getElementById("infoBody");if(!t||!e||!n||!r)return;r.textContent=na;const i=()=>{t.classList.add("open")},o=()=>{t.classList.remove("open")};e.onclick=s=>{s.preventDefault(),s.stopPropagation(),i()},n.onclick=s=>{s.preventDefault(),s.stopPropagation(),o()},t.addEventListener("click",s=>{s.target===t&&o()}),window.addEventListener("keydown",s=>{s.key==="Escape"&&t.classList.contains("open")&&o()}),Ke()||setTimeout(()=>i(),60)}ra();te();let R=$e();function Ue(t){const e=new Set;for(const n of t.def.nodes){if(P(n)!=="ready")continue;const r=it(n.category),i=Math.max(1,r.length-1),o=$t(r,i);o&&e.add(o)}if(!e.size){console.log("No ready categories found."),R=null;try{localStorage.removeItem(Ge)}catch{console.warn("Failed to clear included IDs from storage.")}return}R=new Set;for(const n of t.def.nodes)P(n)==="learned"&&R.add(n.id);for(const n of t.def.nodes){const r=it(n.category),i=Math.max(1,r.length-1),o=$t(r,i);o&&e.has(o)&&R.add(n.id)}console.log(`  Found ${R.size} included definitions.`),Qn(R)}function Gt(t){return R?R.has(t):!0}function ia(t,e){jn([t],e)}function jn(t,e){R||(R=new Set(((T==null?void 0:T.def.nodes)??[]).map(n=>n.id))),R||(R=new Set);for(const n of t)e?R.add(n):R.delete(n);Qn(R)}function P(t){return rt.has(t.id)?"learned":(t.deps??[]).every(r=>rt.has(r))?"ready":"off"}function oa(t){return t==="learned"?js:t==="ready"?Zs:t==="visible"?Qs:Js}let tr=null;function er(t){const e=Un(),n=Wn(),r=e/2,i=n/2,o=Math.max(0,...t.nodes.map(d=>d.level??0)),s=Math.max(6,...t.nodes.map(d=>{var m;return((m=d.title)==null?void 0:m.length)??0})),a=Math.max(54,Math.min(120,30+s*2.4)),c=56,u=mr(t.nodes,d=>d.level??0),f=new Map,l=d=>(Ws(String(d))*.9+d*.37)%(Math.PI*2),h=(d,m,_)=>{if(d.length<=1)return _;const w=_.slice(),I=d.map(k=>Us(k.title)).map(k=>(k+18)/Math.max(1,m)),C=22;for(let k=0;k<C;k++){const M=xn(d.length).sort((L,B)=>w[L]-w[B]);for(let L=0;L<M.length;L++){const B=M[L],st=M[(L+1)%M.length];let W=w[st]-w[B];W<0&&(W+=Math.PI*2);const lt=(I[B]+I[st])/2;if(W<lt){const Rt=(lt-W)/2;w[B]-=Rt,w[st]+=Rt}}}for(let k=0;k<w.length;k++)w[k]=(w[k]%(Math.PI*2)+Math.PI*2)%(Math.PI*2);return w};for(let d=0;d<=o;d++){const m=(u.get(d)??[]).slice().sort((k,M)=>k.id.localeCompare(M.id)),_=m.length;if(!_)continue;const w=c+d*a,y=l(d);let I;_===2?I=[y+Math.PI/4,y+(Math.PI+Math.PI/4)]:_===3?I=[0,1,2].map(k=>y+k/3*Math.PI*2+Math.PI/6):I=m.map((k,M)=>y+M/_*Math.PI*2);const C=h(m,w,I);for(let k=0;k<_;k++){const M=m[k],L=C[k];f.set(M.id,{x:r+w*Math.cos(L),y:i+w*Math.sin(L)})}}return{cx:r,cy:i,ringGap:a,base:c,maxLevel:o,pos:f}}function We(t){const e=new Map(t.map(o=>[o.id,o])),n=new Set,r=new Set,i=o=>{const s=e.get(o);if(!s)return 0;if(r.has(o))return s.level??0;if(n.has(o))return 0;n.add(o);let a=0;for(const c of s.deps??[])e.has(c)&&(a=Math.max(a,1+i(c)));return n.delete(o),r.add(o),s.level=a,a};for(const o of t)i(o.id)}function nr(t){var c,u;const e=new Set(t.childrenByPrefix.keys());console.log(`Computing group levels for ${e.size} groups.`);const n=new Map;for(const f of e)n.set(f,new Set);const r=(f,l)=>{const h=it(f);return h.length<l||l>h.length-1?null:$t(h,l)};for(const f of t.def.nodes){const l=it(f.category);for(const h of f.deps??[]){const d=(c=t.byId.get(h))==null?void 0:c.category;if(!d)throw new Error(`Dependency id not found: ${h}`);const m=it(d),_=Math.min(l.length-1,m.length-1);for(let w=1;w<=_;w++){const y=r(f.category,w),I=r(d,w);!y||!I||y!==I&&((u=n.get(y))==null||u.add(I))}}}const i=new Map,o=new Set,s=new Set,a=f=>{const l=i.get(f);if(l!==void 0)return l;if(s.has(f))return i.get(f)??0;if(o.has(f))return 0;o.add(f);let h=0;for(const d of n.get(f)??[])h=Math.max(h,a(d)+1);return o.delete(f),s.add(f),i.set(f,h),h};for(const f of e)a(f);return{depsByGroup:n,levelByGroup:i}}function sa(t,e){const n=t.groupLevel??0,r=e.groupLevel??0;return n!==r?n-r:t.name.localeCompare(e.name)}function aa(t){We(t.nodes),Xe(t);const e=er(t);tr=e;const n=new Set;{const l=new Map(t.nodes.map(h=>[h.id,h]));for(const h of t.edges){const d=l.get(h.target);if(!d||P(d)!=="learned")continue;const m=l.get(h.source);if(!m)continue;P(m)==="off"&&n.add(m.id)}}const r=xn(0,e.maxLevel+1).map(l=>({level:l,r:e.base+l*e.ringGap}));Jn.selectAll("circle.ring").data(r,l=>String(l.level)).join(l=>l.append("circle").attr("class","ring")).attr("cx",e.cx).attr("cy",e.cy).attr("r",l=>l.r),ce();const i=l=>{const h=e.pos.get(l.source),d=e.pos.get(l.target);if(!h||!d)return"";const m=(h.x+d.x)/2,_=(h.y+d.y)/2,w=.55,y=m+(e.cx-m)*w,I=_+(e.cy-_)*w;return`M${h.x},${h.y} Q${y},${I} ${d.x},${d.y}`},o=new Map(t.nodes.map(l=>[l.id,l]));Ks.selectAll("path.link").data(t.edges,l=>`${l.source}->${l.target}`).join(l=>l.append("path").attr("class","link").attr("fill","none").attr("stroke-linecap","round").attr("stroke-linejoin","round")).attr("d",i).classed("link-on",l=>{const h=o.get(l.target);return(h?P(h):"off")==="learned"}).classed("link-off",l=>{const h=o.get(l.target);return(h?P(h):"off")!=="learned"}).attr("stroke",l=>{const h=o.get(l.target);return(h?P(h):"off")==="learned"?"rgba(226, 232, 240, 0.85)":"rgba(148, 163, 184, 0.16)"}).attr("stroke-width",l=>{const h=o.get(l.target);return(h?P(h):"off")==="learned"?2.2:1}).attr("stroke-dasharray",l=>{const h=o.get(l.target);return(h?P(h):"off")==="learned"?null:"3 5"}).attr("opacity",1);const a=pe.selectAll("g.node").data(t.nodes,l=>l.id).join(l=>{const h=l.append("g").attr("class","node"),d=8,m=11;return h.append("circle").attr("class","node-circle").attr("r",d),h.append("circle").attr("class","leaf-underline").attr("r",m+4),h.append("text").attr("dx",12).attr("dy",5),h.append("title"),h});a.select("title").text(l=>`${l.title} (level: ${l.level??0})
${l.category}`),a.on("mouseenter",(l,h)=>{Y(l.currentTarget).classed("hovering",!0),jt(h.level??0)}).on("mouseleave",l=>{Y(l.currentTarget).classed("hovering",!1),jt(null),G&&pe.selectAll("g.node").filter(d=>d.id===G).classed("hovering",!0)}),G&&pe.selectAll("g.node").classed("hovering",l=>Ve===null&&l.id===G),a.attr("transform",l=>{const h=e.pos.get(l.id);return`translate(${h.x},${h.y})`});const c=l=>{const h=P(l),d=h==="off"&&n.has(l.id)?"visible":h;return oa(d)},u=l=>{const h=P(l);return h==="off"&&n.has(l.id)?"visible":h};a.select("circle.node-circle").attr("display",l=>null).attr("fill",l=>c(l)).attr("opacity",1),a.select("circle.leaf-underline").attr("fill","none").attr("stroke",l=>c(l)).attr("stroke-width",l=>2).attr("opacity",l=>.9),a.select("text").text(l=>l.title).attr("fill","#e6edf3").attr("opacity",l=>u(l)==="off"?.22:1).attr("text-decoration","none").attr("text-decoration-thickness",null).attr("text-underline-offset",null),wa(a);const f=document.getElementById("search");f.oninput=()=>{const l=wn(f.value),h=d=>l&&wn(d.id).includes(l);a.selectAll("circle.node-circle").attr("stroke",d=>h(d)?"#ef4444":"none").attr("stroke-width",d=>h(d)?2.5:1)}}const rr=document.getElementById("viewer"),ir=document.getElementById("viewerTitle"),ee=document.getElementById("viewerPath"),Te=document.getElementById("viewerBody"),ft=document.getElementById("markLearned");function or(t){if(!ft)return;if(!t){ft.style.display="none",ft.disabled=!0,ft.onclick=null;return}const e=P(t);ft.style.display="",ft.disabled=e!=="ready",ft.onclick=()=>{var n;P(t)==="ready"&&(rt.add(t.id),Zn(),te(),T&&Ue(T),mt(!0),A&&((n=document.getElementById("tabProgress"))!=null&&n.classList.contains("active"))&&Xe(A),_t.selectedLeaf=void 0,G=null,Je(),requestAnimationFrame(()=>{Tt()}))}}function ge(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}function ca(t){const e=t.replace(/\r\n?/g,`
`).split(`
`),n=[];let r=0;for(;r<e.length&&!e[r].trim();)r++;for(r<e.length&&/^#{1,2}\s+/.test(e[r].trim())&&r++;r<e.length;r++)n.push(e[r]);for(;n.length&&!n[0].trim();)n.shift();for(;n.length&&!n[n.length-1].trim();)n.pop();const i=[];let o=0;for(const s of n){if(!s.trim()){o++,o<=2&&i.push("");continue}o=0,i.push(s)}return i.join(`
`)}function le(t){if(!A)return;const e=A.nodes.find(n=>n.id===t);e&&(_t.selectedLeaf=t,G=t,mt(!0),requestAnimationFrame(()=>{xa(t)}),ar(e))}function la(t){le(t)}function ua(t){var r;const e=new Map,n=new Map(((A==null?void 0:A.nodes)??[]).map(i=>[i.id,i]));for(const i of t){const o=((r=n.get(i))==null?void 0:r.title)??i.split("/").at(-1)??i;e.set(i,{id:i,title:o})}return e}function fa(t,e){const n=ca(t),r=ua(e),i=/\[([^\]]+)\]\(([^)]+)\)/g,s=n.replace(i,(a,c,u)=>{const f=String(c??"").trim(),l=String(u??"").trim();let h;if(r.has(l)&&(h=l),!h&&l.includes("/")){const m="/"+l.split("/").filter(Boolean).pop(),_=l.split("/")[0],w=Array.from(r.keys()).filter(y=>y.startsWith(_+"/")&&y.endsWith(m));w.length===1&&(h=w[0])}if(!h)return ge(f||l);const d=r.get(h);return`<span class="dep" data-dep="${ge(d.id)}">${ge(d.title)}</span>`}).split(/\n\s*\n+/g).map(a=>a.replace(/\s*\n\s*/g," ").trim()).filter(Boolean);Te.innerHTML=s.map(a=>`<p>${a}</p>`).join(""),Te.querySelectorAll("span.dep[data-dep]").forEach(a=>{a.onclick=c=>{c.preventDefault(),c.stopPropagation();const u=a.dataset.dep;u&&la(u)}})}function ha(t,e){rr.style.display="",ir.textContent=t.title,ee.style.display="",ee.textContent=t.category,fa(e,t.deps??[]),or(t)}function Je(){rr.style.display="",ir.textContent="Content",ee.style.display="none",ee.textContent="",Te.innerHTML='<p style="margin:0; color:#a9b4c0;">Select a definition to show the content.</p>',or(void 0)}function it(t){return t.split("/").filter(Boolean)}function $t(t,e){return t.slice(0,e).join("/")}function da(t){console.log("Building raw data structure...");const e=new Map(t.nodes.map(o=>[o.id,o])),n=new Set;for(const o of t.nodes){const[s]=it(o.category);s&&n.add(s)}const r=Array.from(n).sort();console.log(`  Found ${r.length} fields: ${r.join(", ")}`);const i=new Map;for(const o of t.nodes){const s=it(o.category);for(let a=1;a<=s.length-1;a++){const c=$t(s,a),u=i.get(c)??[];u.push(o.id),i.set(c,u)}}for(const[o,s]of i)i.set(o,Array.from(new Set(s)).sort());return{def:t,byId:e,childrenByPrefix:i,fields:r}}const sr="definit-db.ui.categories.openPrefixes";function pa(){try{const t=localStorage.getItem(sr);if(!t)return new Set;const e=JSON.parse(t);return Array.isArray(e)?new Set(e.filter(n=>typeof n=="string")):new Set}catch{return new Set}}function ga(t){try{localStorage.setItem(sr,JSON.stringify(Array.from(t)))}catch{}}let qt=pa();function _n(t){return t==="ready"?0:t==="learned"?1:t==="visible"?2:3}function ma(t){const e=new Set,n=new Map(t.nodes.map(r=>[r.id,r]));for(const r of t.edges){const i=n.get(r.target);if(!i||P(i)!=="learned")continue;const o=n.get(r.source);o&&P(o)==="off"&&e.add(o.id)}return e}function Pe(t,e){const n=P(t);return n==="off"&&e.has(t.id)?"visible":n}function ya(t,e){const n=t.byId,r=ma(e),{levelByGroup:i}=nr(t),o={id:"",name:"",kind:"group",depth:0,children:[],groupLevel:0};for(const a of t.def.nodes){const c=it(a.category);let u=o;for(let l=0;l<c.length-1;l++){const h=c.slice(0,l+1).join("/");let d=u.children.find(m=>m.kind==="group"&&m.id===h);d?d.groupLevel=i.get(h)??d.groupLevel??0:(d={id:h,name:c[l],kind:"group",depth:l+1,children:[],groupLevel:i.get(h)??0},u.children.push(d)),u=d}const f={id:a.id,name:c.at(-1)??a.id,kind:"leaf",depth:c.length,children:[],leaf:n.get(a.id)??a};u.children.push(f)}const s=a=>{for(const c of a.children)s(c);a.children.sort((c,u)=>{if(c.kind!==u.kind)return c.kind==="group"?-1:1;if(c.kind==="group"&&u.kind==="group")return sa(c,u);const f=c.leaf,l=u.leaf,h=Pe(f,r),d=Pe(l,r),m=_n(h),_=_n(d);if(m!==_)return m-_;const w=f.level??0,y=l.level??0;return w!==y?w-y:(f.title??f.id).localeCompare(l.title??l.id)})};return s(o),{root:o,visibleNodeIds:r}}function Mt(t,e){const n=document.getElementById("categoriesTree");if(!n)return;const{root:r,visibleNodeIds:i}=ya(t,e);n.innerHTML="";const o=u=>u?!qt.has(u):!0,s=(u,f)=>{u&&(f?qt.delete(u):qt.add(u),ga(qt))},a=u=>u?t.childrenByPrefix.get(u)??[]:t.def.nodes.map(f=>f.id),c=u=>{const f=u.kind==="group"?o(u.id):!0;if(u.id!==""){const l=document.createElement("div");l.className="treeRow",l.style.setProperty("--indent",String(Math.max(0,u.depth-1)));const h=document.createElement("span");h.className="treeIndent",l.appendChild(h);const d=document.createElement("span");d.className="treeChevron",d.textContent="",l.appendChild(d);const m=document.createElement("input");m.type="checkbox",m.className="treeCheckbox";const _=document.createElement("span");_.className="treeLabel";const w=document.createElement("span");if(w.className="treeMeta",u.kind==="group"){const y=a(u.id),I=y.length?y.every(M=>Gt(M)):!0,C=y.some(M=>Gt(M));m.checked=I,m.indeterminate=C&&!I,_.textContent=u.name,l.classList.add("hasChildren"),l.classList.add("clickable"),d.classList.toggle("open",f),l.onclick=M=>{const L=M.target;L&&L.tagName==="INPUT"||(s(u.id,!f),Mt(t,A??e))},m.onchange=()=>{const M=m.checked;jn(y,M),mt(!0),Mt(t,A??e)},w.textContent="";const k=document.createElement("span");k.textContent=`L${u.groupLevel??0}`,w.appendChild(k)}else{const y=u.leaf;m.checked=Gt(y.id);const I=Pe(y,i),C=document.createElement("span");C.className=`stateDot ${I}`,w.appendChild(C);const k=document.createElement("span");k.textContent=`L${y.level??0}`,w.appendChild(k),_.textContent=y.title,l.classList.add("clickable"),l.onclick=M=>{const L=M.target;L&&L.tagName==="INPUT"||(yt("definition"),le(y.id),ct&&!ct.classList.contains("expanded")&&ne(!1))},m.onchange=()=>{ia(y.id,m.checked),mt(!0),Mt(t,A??e)}}l.appendChild(m),l.appendChild(_),l.appendChild(w),n.appendChild(l)}if(u.kind==="group"&&f)for(const l of u.children)c(l)};c(r)}function va(t,e){const n=a=>Gt(a),r=t.def.nodes.filter(a=>n(a.id)).map(a=>({...a,level:0})),i=new Set(r.map(a=>a.id)),o=t.def.edges.filter(a=>i.has(a.source)&&i.has(a.target)).map(a=>({...a})),s=new Map;for(const a of o){const c=s.get(a.source)??[];c.push(a.target),s.set(a.source,c)}for(const a of r)a.deps=s.get(a.id)??a.deps??[],a.level=0;return We(r),{nodes:r,edges:o}}function wa(t){t.on("click.interact",(e,n)=>{e.preventDefault(),e.stopPropagation(),yt("definition"),le(n.id)})}const _a=fetch("./defs.json").then(t=>t.json()).then(t=>da(t)),_t={selectedLeaf:void 0};let A=null;function Tt(){if(!A)return;const t=Math.max(0,...A.nodes.map(n=>n.level??0));let e=t;for(let n=t;n>=0;n--)if(A.nodes.some(i=>{if((i.level??0)!==n)return!1;const o=P(i);return o==="ready"||o==="learned"})){e=n;break}Qe(e),jt(e)}function mt(t){const e=t?Kn(gt.node()):null;_a.then(n=>{T=n,console.log(`Rendering graph with ${n.def.nodes.length} definitions...`),$e()===null?Ue(n):R=$e();const r=va(n);if(A=r,aa(r),e&&gt.call(He.transform,e),ce(),_t.selectedLeaf||(ct&&!ct.classList.contains("expanded")&&ne(!1),lr(n,r)||requestAnimationFrame(()=>{Tt()})),_t.selectedLeaf){const i=r.nodes.find(o=>o.id===_t.selectedLeaf);i&&ar(i)}Mt(n,r)}).catch(n=>{console.error(n)})}function Qe(t){if(!A)return;const e=tr??er(A),n=e.base+t*e.ringGap,r=60,i=Un(),o=Wn(),s=2*n+r,a=Math.max(.12,Math.min(6,Math.min(i/s,o/s))),c=i/2-e.cx*a,u=o/2-e.cy*a;gt.transition().duration(650).call(He.transform,se.translate(c,u).scale(a))}function xa(t){if(!A)return;const e=A.nodes.find(n=>n.id===t);e&&Qe(e.level??0)}async function ar(t){G=t.id,ce();const e=t.content||"(no content)";ha(t,e)}mt(!1);const cr="definit-db.ui.bottomPanelCollapsed",ct=document.getElementById("bottomPanel"),vt=document.getElementById("togglePanel"),me=document.getElementById("mainPanel");function ne(t){if(!(!ct||!vt||!(vt.getAttribute("aria-expanded")!==String(!t)))){ct.classList.toggle("expanded",!t),me==null||me.classList.toggle("expanded",!t),vt.textContent=t?"":"",vt.setAttribute("aria-expanded",String(!t));try{localStorage.setItem(cr,t?"1":"0")}catch{}requestAnimationFrame(()=>{Tt()})}}if(ct&&vt){let t=!1;try{t=localStorage.getItem(cr)==="1"}catch{t=!1}ne(t),vt.addEventListener("click",e=>{e.preventDefault();const n=!ct.classList.contains("expanded");ne(!n)})}const j=document.getElementById("tabDefinition"),tt=document.getElementById("tabCategories"),et=document.getElementById("tabProgress"),ye=document.getElementById("tabPageDefinition"),ve=document.getElementById("tabPageCategories"),we=document.getElementById("tabPageProgress");function yt(t){const e=t==="definition",n=t==="categories",r=t==="progress";j==null||j.classList.toggle("active",e),tt==null||tt.classList.toggle("active",n),et==null||et.classList.toggle("active",r),j==null||j.setAttribute("aria-selected",String(e)),tt==null||tt.setAttribute("aria-selected",String(n)),et==null||et.setAttribute("aria-selected",String(r)),ye==null||ye.classList.toggle("active",e),ve==null||ve.classList.toggle("active",n),we==null||we.classList.toggle("active",r),n&&T&&A&&Mt(T,A),r&&A&&Xe(A)}j==null||j.addEventListener("click",t=>{t.preventDefault(),yt("definition")});tt==null||tt.addEventListener("click",t=>{t.preventDefault(),yt("categories")});et==null||et.addEventListener("click",t=>{t.preventDefault(),yt("progress")});yt("definition");const _e=document.getElementById("progress");_e==null||_e.addEventListener("click",()=>{_t.selectedLeaf=void 0,G=null,Je(),T&&Ue(T),mt(!0),requestAnimationFrame(()=>{T&&A&&lr(T,A)||Tt()})});const xe=document.getElementById("overview")??document.getElementById("focus");xe==null||xe.addEventListener("click",()=>{if(!A)return;const t=Math.max(0,...A.nodes.map(e=>e.level??0));Qe(t),jt(t)});const be=document.getElementById("resetProgress")??document.getElementById("reset");be==null||be.addEventListener("click",()=>{if(!Ke()){te();return}const t=document.getElementById("resetConfirmOverlay"),e=document.getElementById("resetConfirmClose"),n=document.getElementById("resetConfirmCancel"),r=document.getElementById("resetConfirmOk");if(!t||!e||!n||!r){console.error("Missing reset confirmation elements");return}const i=()=>t.classList.add("open"),o=()=>t.classList.remove("open");e.onclick=a=>{a.preventDefault(),a.stopPropagation(),o()},n.onclick=a=>{a.preventDefault(),a.stopPropagation(),o()},r.onclick=a=>{a.preventDefault(),a.stopPropagation(),o(),console.log("Resetting progress..."),ea(),Zn(),Je(),te(),mt(!0)},t.onclick=a=>{a.target===t&&o()};const s=a=>{a.key==="Escape"&&t.classList.contains("open")&&o()};window.addEventListener("keydown",s,{passive:!0}),i()});function lr(t,e){We(e.nodes);const n=e.nodes.filter(o=>P(o)==="ready");if(!n.length)return!1;const{levelByGroup:r}=nr(t),i=o=>{const s=it(o),a=Math.max(1,s.length-1),c=$t(s,a);return c?r.get(c)??0:0};return n.sort((o,s)=>{const a=o.level??0,c=s.level??0;if(a!==c)return a-c;const u=i(o.category),f=i(s.category);return u!==f?u-f:o.id.localeCompare(s.id)}),yt("definition"),le(n[0].id),!0}
