(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();class dr extends Map{constructor(e,n=mr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Je(this,e))}has(e){return super.has(Je(this,e))}set(e,n){return super.set(pr(this,e),n)}delete(e){return super.delete(gr(this,e))}}function Je({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function pr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function gr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function mr(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Qe(t){return t}function yr(t,...e){return vr(t,Qe,Qe,e)}function vr(t,e,n,r){return(function i(o,s){if(s>=r.length)return n(o);const a=new dr,c=r[s++];let u=-1;for(const f of o){const l=c(f,++u,o),h=a.get(l);h?h.push(f):a.set(l,[f])}for(const[f,l]of a)a.set(f,i(l,s));return e(a)})(t,0)}function xn(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}var _r={value:()=>{}};function ze(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ht(n)}function Ht(t){this._=t}function wr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ht.prototype=ze.prototype={constructor:Ht,on:function(t,e){var n=this._,r=wr(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=xr(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Ze(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ze(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ht(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function xr(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ze(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=_r,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ke="http://www.w3.org/1999/xhtml";const je={svg:"http://www.w3.org/2000/svg",xhtml:ke,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function re(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),je.hasOwnProperty(e)?{space:je[e],local:t}:t}function br(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ke&&e.documentElement.namespaceURI===ke?e.createElement(t):e.createElementNS(n,t)}}function kr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bn(t){var e=re(t);return(e.local?kr:br)(e)}function Er(){}function Re(t){return t==null?Er:function(){return this.querySelector(t)}}function Sr(t){typeof t!="function"&&(t=Re(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,u,f=0;f<s;++f)(c=o[f])&&(u=t.call(c,c.__data__,f,o))&&("__data__"in c&&(u.__data__=c.__data__),a[f]=u);return new O(r,this._parents)}function Ir(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Mr(){return[]}function kn(t){return t==null?Mr:function(){return this.querySelectorAll(t)}}function Ar(t){return function(){return Ir(t.apply(this,arguments))}}function Nr(t){typeof t=="function"?t=Ar(t):t=kn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(t.call(c,c.__data__,u,s)),i.push(c));return new O(r,i)}function En(t){return function(){return this.matches(t)}}function Sn(t){return function(e){return e.matches(t)}}var Lr=Array.prototype.find;function Cr(t){return function(){return Lr.call(this.children,t)}}function $r(){return this.firstElementChild}function Tr(t){return this.select(t==null?$r:Cr(typeof t=="function"?t:Sn(t)))}var Pr=Array.prototype.filter;function zr(){return Array.from(this.children)}function Rr(t){return function(){return Pr.call(this.children,t)}}function Dr(t){return this.selectAll(t==null?zr:Rr(typeof t=="function"?t:Sn(t)))}function Or(t){typeof t!="function"&&(t=En(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,u=0;u<s;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&a.push(c);return new O(r,this._parents)}function In(t){return new Array(t.length)}function Fr(){return new O(this._enter||this._groups.map(In),this._parents)}function Ut(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ut.prototype={constructor:Ut,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Br(t){return function(){return t}}function qr(t,e,n,r,i,o){for(var s=0,a,c=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Ut(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function Hr(t,e,n,r,i,o,s){var a,c,u=new Map,f=e.length,l=o.length,h=new Array(f),p;for(a=0;a<f;++a)(c=e[a])&&(h[a]=p=s.call(c,c.__data__,a,e)+"",u.has(p)?i[a]=c:u.set(p,c));for(a=0;a<l;++a)p=s.call(t,o[a],a,o)+"",(c=u.get(p))?(r[a]=c,c.__data__=o[a],u.delete(p)):n[a]=new Ut(t,o[a]);for(a=0;a<f;++a)(c=e[a])&&u.get(h[a])===c&&(i[a]=c)}function Xr(t){return t.__data__}function Vr(t,e){if(!arguments.length)return Array.from(this,Xr);var n=e?Hr:qr,r=this._parents,i=this._groups;typeof t!="function"&&(t=Br(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),u=0;u<o;++u){var f=r[u],l=i[u],h=l.length,p=Yr(t.call(f,f&&f.__data__,u,r)),y=p.length,x=a[u]=new Array(y),w=s[u]=new Array(y),m=c[u]=new Array(h);n(f,l,x,w,m,p,e);for(var I=0,C=0,k,M;I<y;++I)if(k=x[I]){for(I>=C&&(C=I+1);!(M=w[C])&&++C<y;);k._next=M||null}}return s=new O(s,r),s._enter=a,s._exit=c,s}function Yr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Gr(){return new O(this._exit||this._groups.map(In),this._parents)}function Kr(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ur(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var u=n[c],f=r[c],l=u.length,h=a[c]=new Array(l),p,y=0;y<l;++y)(p=u[y]||f[y])&&(h[y]=p);for(;c<i;++c)a[c]=n[c];return new O(a,this._parents)}function Wr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Jr(t){t||(t=Qr);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),u,f=0;f<a;++f)(u=s[f])&&(c[f]=u);c.sort(e)}return new O(i,this._parents).order()}function Qr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Zr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function jr(){return Array.from(this)}function ti(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ei(){let t=0;for(const e of this)++t;return t}function ni(){return!this.node()}function ri(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function ii(t){return function(){this.removeAttribute(t)}}function oi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function si(t,e){return function(){this.setAttribute(t,e)}}function ai(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ci(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function li(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ui(t,e){var n=re(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?oi:ii:typeof e=="function"?n.local?li:ci:n.local?ai:si)(n,e))}function Mn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fi(t){return function(){this.style.removeProperty(t)}}function hi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function di(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function pi(t,e,n){return arguments.length>1?this.each((e==null?fi:typeof e=="function"?di:hi)(t,e,n??"")):wt(this.node(),t)}function wt(t,e){return t.style.getPropertyValue(e)||Mn(t).getComputedStyle(t,null).getPropertyValue(e)}function gi(t){return function(){delete this[t]}}function mi(t,e){return function(){this[t]=e}}function yi(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function vi(t,e){return arguments.length>1?this.each((e==null?gi:typeof e=="function"?yi:mi)(t,e)):this.node()[t]}function An(t){return t.trim().split(/^|\s+/)}function De(t){return t.classList||new Nn(t)}function Nn(t){this._node=t,this._names=An(t.getAttribute("class")||"")}Nn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ln(t,e){for(var n=De(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Cn(t,e){for(var n=De(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function _i(t){return function(){Ln(this,t)}}function wi(t){return function(){Cn(this,t)}}function xi(t,e){return function(){(e.apply(this,arguments)?Ln:Cn)(this,t)}}function bi(t,e){var n=An(t+"");if(arguments.length<2){for(var r=De(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?xi:e?_i:wi)(n,e))}function ki(){this.textContent=""}function Ei(t){return function(){this.textContent=t}}function Si(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ii(t){return arguments.length?this.each(t==null?ki:(typeof t=="function"?Si:Ei)(t)):this.node().textContent}function Mi(){this.innerHTML=""}function Ai(t){return function(){this.innerHTML=t}}function Ni(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Li(t){return arguments.length?this.each(t==null?Mi:(typeof t=="function"?Ni:Ai)(t)):this.node().innerHTML}function Ci(){this.nextSibling&&this.parentNode.appendChild(this)}function $i(){return this.each(Ci)}function Ti(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pi(){return this.each(Ti)}function zi(t){var e=typeof t=="function"?t:bn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ri(){return null}function Di(t,e){var n=typeof t=="function"?t:bn(t),r=e==null?Ri:typeof e=="function"?e:Re(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Oi(){var t=this.parentNode;t&&t.removeChild(this)}function Fi(){return this.each(Oi)}function Bi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Hi(t){return this.select(t?qi:Bi)}function Xi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Vi(t){return function(e){t.call(this,e,this.__data__)}}function Yi(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Gi(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Ki(t,e,n){return function(){var r=this.__on,i,o=Vi(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ui(t,e,n){var r=Yi(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,f;c<u;++c)for(i=0,f=a[c];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=e?Ki:Gi,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function $n(t,e,n){var r=Mn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Wi(t,e){return function(){return $n(this,t,e)}}function Ji(t,e){return function(){return $n(this,t,e.apply(this,arguments))}}function Qi(t,e){return this.each((typeof e=="function"?Ji:Wi)(t,e))}function*Zi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Tn=[null];function O(t,e){this._groups=t,this._parents=e}function Pt(){return new O([[document.documentElement]],Tn)}function ji(){return this}O.prototype=Pt.prototype={constructor:O,select:Sr,selectAll:Nr,selectChild:Tr,selectChildren:Dr,filter:Or,data:Vr,enter:Fr,exit:Gr,join:Kr,merge:Ur,selection:ji,order:Wr,sort:Jr,call:Zr,nodes:jr,node:ti,size:ei,empty:ni,each:ri,attr:ui,style:pi,property:vi,classed:bi,text:Ii,html:Li,raise:$i,lower:Pi,append:zi,insert:Di,remove:Fi,clone:Hi,datum:Xi,on:Ui,dispatch:Qi,[Symbol.iterator]:Zi};function Y(t){return typeof t=="string"?new O([[document.querySelector(t)]],[document.documentElement]):new O([[t]],Tn)}function to(t){let e;for(;e=t.sourceEvent;)t=e;return t}function lt(t,e){if(t=to(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ee={capture:!0,passive:!1};function Se(t){t.preventDefault(),t.stopImmediatePropagation()}function eo(t){var e=t.document.documentElement,n=Y(t).on("dragstart.drag",Se,Ee);"onselectstart"in e?n.on("selectstart.drag",Se,Ee):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function no(t,e){var n=t.document.documentElement,r=Y(t).on("dragstart.drag",null);e&&(r.on("click.drag",Se,Ee),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Oe(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Pn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function zt(){}var At=.7,Wt=1/At,vt="\\s*([+-]?\\d+)\\s*",Nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",K="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ro=/^#([0-9a-f]{3,8})$/,io=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),oo=new RegExp(`^rgb\\(${K},${K},${K}\\)$`),so=new RegExp(`^rgba\\(${vt},${vt},${vt},${Nt}\\)$`),ao=new RegExp(`^rgba\\(${K},${K},${K},${Nt}\\)$`),co=new RegExp(`^hsl\\(${Nt},${K},${K}\\)$`),lo=new RegExp(`^hsla\\(${Nt},${K},${K},${Nt}\\)$`),tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oe(zt,Lt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:en,formatHex:en,formatHex8:uo,formatHsl:fo,formatRgb:nn,toString:nn});function en(){return this.rgb().formatHex()}function uo(){return this.rgb().formatHex8()}function fo(){return zn(this).formatHsl()}function nn(){return this.rgb().formatRgb()}function Lt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ro.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rn(e):n===3?new D(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Dt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Dt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=io.exec(t))?new D(e[1],e[2],e[3],1):(e=oo.exec(t))?new D(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=so.exec(t))?Dt(e[1],e[2],e[3],e[4]):(e=ao.exec(t))?Dt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=co.exec(t))?an(e[1],e[2]/100,e[3]/100,1):(e=lo.exec(t))?an(e[1],e[2]/100,e[3]/100,e[4]):tn.hasOwnProperty(t)?rn(tn[t]):t==="transparent"?new D(NaN,NaN,NaN,0):null}function rn(t){return new D(t>>16&255,t>>8&255,t&255,1)}function Dt(t,e,n,r){return r<=0&&(t=e=n=NaN),new D(t,e,n,r)}function ho(t){return t instanceof zt||(t=Lt(t)),t?(t=t.rgb(),new D(t.r,t.g,t.b,t.opacity)):new D}function Ie(t,e,n,r){return arguments.length===1?ho(t):new D(t,e,n,r??1)}function D(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Oe(D,Ie,Pn(zt,{brighter(t){return t=t==null?Wt:Math.pow(Wt,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?At:Math.pow(At,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new D(ht(this.r),ht(this.g),ht(this.b),Jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:on,formatHex:on,formatHex8:po,formatRgb:sn,toString:sn}));function on(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}`}function po(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}${ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function sn(){const t=Jt(this.opacity);return`${t===1?"rgb(":"rgba("}${ht(this.r)}, ${ht(this.g)}, ${ht(this.b)}${t===1?")":`, ${t})`}`}function Jt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ht(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ft(t){return t=ht(t),(t<16?"0":"")+t.toString(16)}function an(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new H(t,e,n,r)}function zn(t){if(t instanceof H)return new H(t.h,t.s,t.l,t.opacity);if(t instanceof zt||(t=Lt(t)),!t)return new H;if(t instanceof H)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new H(s,a,c,t.opacity)}function go(t,e,n,r){return arguments.length===1?zn(t):new H(t,e,n,r??1)}function H(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Oe(H,go,Pn(zt,{brighter(t){return t=t==null?Wt:Math.pow(Wt,t),new H(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?At:Math.pow(At,t),new H(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new D(fe(t>=240?t-240:t+120,i,r),fe(t,i,r),fe(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new H(cn(this.h),Ot(this.s),Ot(this.l),Jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jt(this.opacity);return`${t===1?"hsl(":"hsla("}${cn(this.h)}, ${Ot(this.s)*100}%, ${Ot(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cn(t){return t=(t||0)%360,t<0?t+360:t}function Ot(t){return Math.max(0,Math.min(1,t||0))}function fe(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Rn=t=>()=>t;function mo(t,e){return function(n){return t+n*e}}function yo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function vo(t){return(t=+t)==1?Dn:function(e,n){return n-e?yo(e,n,t):Rn(isNaN(e)?n:e)}}function Dn(t,e){var n=e-t;return n?mo(t,n):Rn(isNaN(t)?e:t)}const ln=(function t(e){var n=vo(e);function r(i,o){var s=n((i=Ie(i)).r,(o=Ie(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),u=Dn(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function st(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Me=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,he=new RegExp(Me.source,"g");function _o(t){return function(){return t}}function wo(t){return function(e){return t(e)+""}}function xo(t,e){var n=Me.lastIndex=he.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Me.exec(t))&&(i=he.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:st(r,i)})),n=he.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?wo(c[0].x):_o(e):(e=c.length,function(u){for(var f=0,l;f<e;++f)a[(l=c[f]).i]=l.x(u);return a.join("")})}var un=180/Math.PI,Ae={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function On(t,e,n,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*un,skewX:Math.atan(c)*un,scaleX:s,scaleY:a}}var Ft;function bo(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ae:On(e.a,e.b,e.c,e.d,e.e,e.f)}function ko(t){return t==null||(Ft||(Ft=document.createElementNS("http://www.w3.org/2000/svg","g")),Ft.setAttribute("transform",t),!(t=Ft.transform.baseVal.consolidate()))?Ae:(t=t.matrix,On(t.a,t.b,t.c,t.d,t.e,t.f))}function Fn(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,l,h,p,y){if(u!==l||f!==h){var x=p.push("translate(",null,e,null,n);y.push({i:x-4,x:st(u,l)},{i:x-2,x:st(f,h)})}else(l||h)&&p.push("translate("+l+e+h+n)}function s(u,f,l,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:l.push(i(l)+"rotate(",null,r)-2,x:st(u,f)})):f&&l.push(i(l)+"rotate("+f+r)}function a(u,f,l,h){u!==f?h.push({i:l.push(i(l)+"skewX(",null,r)-2,x:st(u,f)}):f&&l.push(i(l)+"skewX("+f+r)}function c(u,f,l,h,p,y){if(u!==l||f!==h){var x=p.push(i(p)+"scale(",null,",",null,")");y.push({i:x-4,x:st(u,l)},{i:x-2,x:st(f,h)})}else(l!==1||h!==1)&&p.push(i(p)+"scale("+l+","+h+")")}return function(u,f){var l=[],h=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,l,h),s(u.rotate,f.rotate,l,h),a(u.skewX,f.skewX,l,h),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,l,h),u=f=null,function(p){for(var y=-1,x=h.length,w;++y<x;)l[(w=h[y]).i]=w.x(p);return l.join("")}}}var Eo=Fn(bo,"px, ","px)","deg)"),So=Fn(ko,", ",")",")"),Io=1e-12;function fn(t){return((t=Math.exp(t))+1/t)/2}function Mo(t){return((t=Math.exp(t))-1/t)/2}function Ao(t){return((t=Math.exp(2*t))-1)/(t+1)}const No=(function t(e,n,r){function i(o,s){var a=o[0],c=o[1],u=o[2],f=s[0],l=s[1],h=s[2],p=f-a,y=l-c,x=p*p+y*y,w,m;if(x<Io)m=Math.log(h/u)/e,w=function(R){return[a+R*p,c+R*y,u*Math.exp(e*R*m)]};else{var I=Math.sqrt(x),C=(h*h-u*u+r*x)/(2*u*n*I),k=(h*h-u*u-r*x)/(2*h*n*I),M=Math.log(Math.sqrt(C*C+1)-C),A=Math.log(Math.sqrt(k*k+1)-k);m=(A-M)/e,w=function(R){var ot=R*m,W=fn(M),ct=u/(n*I)*(W*Ao(e*ot+M)-Mo(M));return[a+ct*p,c+ct*y,u*W/fn(e*ot+M)]}}return w.duration=m*1e3*e/Math.SQRT2,w}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return t(s,a,c)},i})(Math.SQRT2,2,4);var xt=0,St=0,kt=0,Bn=1e3,Qt,It,Zt=0,dt=0,ie=0,Ct=typeof performance=="object"&&performance.now?performance:Date,qn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fe(){return dt||(qn(Lo),dt=Ct.now()+ie)}function Lo(){dt=0}function jt(){this._call=this._time=this._next=null}jt.prototype=Hn.prototype={constructor:jt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Fe():+n)+(e==null?0:+e),!this._next&&It!==this&&(It?It._next=this:Qt=this,It=this),this._call=t,this._time=n,Ne()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ne())}};function Hn(t,e,n){var r=new jt;return r.restart(t,e,n),r}function Co(){Fe(),++xt;for(var t=Qt,e;t;)(e=dt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xt}function hn(){dt=(Zt=Ct.now())+ie,xt=St=0;try{Co()}finally{xt=0,To(),dt=0}}function $o(){var t=Ct.now(),e=t-Zt;e>Bn&&(ie-=e,Zt=t)}function To(){for(var t,e=Qt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Qt=n);It=t,Ne(r)}function Ne(t){if(!xt){St&&(St=clearTimeout(St));var e=t-dt;e>24?(t<1/0&&(St=setTimeout(hn,t-Ct.now()-ie)),kt&&(kt=clearInterval(kt))):(kt||(Zt=Ct.now(),kt=setInterval($o,Bn)),xt=1,qn(hn))}}function dn(t,e,n){var r=new jt;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Po=ze("start","end","cancel","interrupt"),zo=[],Xn=0,pn=1,Le=2,Xt=3,gn=4,Ce=5,Vt=6;function oe(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ro(t,n,{name:e,index:r,group:i,on:Po,tween:zo,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Xn})}function Be(t,e){var n=X(t,e);if(n.state>Xn)throw new Error("too late; already scheduled");return n}function U(t,e){var n=X(t,e);if(n.state>Xt)throw new Error("too late; already running");return n}function X(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ro(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Hn(o,0,n.time);function o(u){n.state=pn,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,l,h,p;if(n.state!==pn)return c();for(f in r)if(p=r[f],p.name===n.name){if(p.state===Xt)return dn(s);p.state===gn?(p.state=Vt,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[f]):+f<e&&(p.state=Vt,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[f])}if(dn(function(){n.state===Xt&&(n.state=gn,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Le,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Le){for(n.state=Xt,i=new Array(h=n.tween.length),f=0,l=-1;f<h;++f)(p=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++l]=p);i.length=l+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Ce,1),l=-1,h=i.length;++l<h;)i[l].call(t,f);n.state===Ce&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Vt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Yt(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>Le&&r.state<Ce,r.state=Vt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Do(t){return this.each(function(){Yt(this,t)})}function Oo(t,e){var n,r;return function(){var i=U(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Fo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=U(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=a;break}c===u&&i.push(a)}o.tween=i}}function Bo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=X(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Oo:Fo)(n,t,e))}function qe(t,e,n){var r=t._id;return t.each(function(){var i=U(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return X(i,r).value[e]}}function Vn(t,e){var n;return(typeof e=="number"?st:e instanceof Lt?ln:(n=Lt(e))?(e=n,ln):xo)(t,e)}function qo(t){return function(){this.removeAttribute(t)}}function Ho(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xo(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Vo(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Yo(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function Go(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function Ko(t,e){var n=re(t),r=n==="transform"?So:Vn;return this.attrTween(t,typeof e=="function"?(n.local?Go:Yo)(n,r,qe(this,"attr."+t,e)):e==null?(n.local?Ho:qo)(n):(n.local?Vo:Xo)(n,r,e))}function Uo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Wo(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Jo(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Wo(t,o)),n}return i._value=e,i}function Qo(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Uo(t,o)),n}return i._value=e,i}function Zo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=re(t);return this.tween(n,(r.local?Jo:Qo)(r,e))}function jo(t,e){return function(){Be(this,t).delay=+e.apply(this,arguments)}}function ts(t,e){return e=+e,function(){Be(this,t).delay=e}}function es(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?jo:ts)(e,t)):X(this.node(),e).delay}function ns(t,e){return function(){U(this,t).duration=+e.apply(this,arguments)}}function rs(t,e){return e=+e,function(){U(this,t).duration=e}}function is(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ns:rs)(e,t)):X(this.node(),e).duration}function os(t,e){if(typeof e!="function")throw new Error;return function(){U(this,t).ease=e}}function ss(t){var e=this._id;return arguments.length?this.each(os(e,t)):X(this.node(),e).ease}function as(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;U(this,t).ease=n}}function cs(t){if(typeof t!="function")throw new Error;return this.each(as(this._id,t))}function ls(t){typeof t!="function"&&(t=En(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,u=0;u<s;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&a.push(c);return new it(r,this._parents,this._name,this._id)}function us(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],u=n[a],f=c.length,l=s[a]=new Array(f),h,p=0;p<f;++p)(h=c[p]||u[p])&&(l[p]=h);for(;a<r;++a)s[a]=e[a];return new it(s,this._parents,this._name,this._id)}function fs(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function hs(t,e,n){var r,i,o=fs(e)?Be:U;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function ds(t,e){var n=this._id;return arguments.length<2?X(this.node(),n).on.on(t):this.each(hs(n,t,e))}function ps(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function gs(){return this.on("end.remove",ps(this._id))}function ms(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Re(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,u=o[s]=new Array(c),f,l,h=0;h<c;++h)(f=a[h])&&(l=t.call(f,f.__data__,h,a))&&("__data__"in f&&(l.__data__=f.__data__),u[h]=l,oe(u[h],e,n,h,u,X(f,n)));return new it(o,this._parents,e,n)}function ys(t){var e=this._name,n=this._id;typeof t!="function"&&(t=kn(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],u=c.length,f,l=0;l<u;++l)if(f=c[l]){for(var h=t.call(f,f.__data__,l,c),p,y=X(f,n),x=0,w=h.length;x<w;++x)(p=h[x])&&oe(p,e,n,x,h,y);o.push(h),s.push(f)}return new it(o,s,e,n)}var vs=Pt.prototype.constructor;function _s(){return new vs(this._groups,this._parents)}function ws(t,e){var n,r,i;return function(){var o=wt(this,t),s=(this.style.removeProperty(t),wt(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Yn(t){return function(){this.style.removeProperty(t)}}function xs(t,e,n){var r,i=n+"",o;return function(){var s=wt(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function bs(t,e,n){var r,i,o;return function(){var s=wt(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),wt(this,t))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function ks(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var c=U(this,t),u=c.on,f=c.value[o]==null?a||(a=Yn(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(s,i=f),c.on=r}}function Es(t,e,n){var r=(t+="")=="transform"?Eo:Vn;return e==null?this.styleTween(t,ws(t,r)).on("end.style."+t,Yn(t)):typeof e=="function"?this.styleTween(t,bs(t,r,qe(this,"style."+t,e))).each(ks(this._id,t)):this.styleTween(t,xs(t,r,e),n).on("end.style."+t,null)}function Ss(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Is(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Ss(t,s,n)),r}return o._value=e,o}function Ms(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Is(t,e,n??""))}function As(t){return function(){this.textContent=t}}function Ns(t){return function(){var e=t(this);this.textContent=e??""}}function Ls(t){return this.tween("text",typeof t=="function"?Ns(qe(this,"text",t)):As(t==null?"":t+""))}function Cs(t){return function(e){this.textContent=t.call(this,e)}}function $s(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Cs(i)),e}return r._value=t,r}function Ts(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,$s(t))}function Ps(){for(var t=this._name,e=this._id,n=Gn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var f=X(c,e);oe(c,t,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new it(r,this._parents,t,n)}function zs(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var u=U(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),u.on=e}),i===0&&o()})}var Rs=0;function it(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Gn(){return++Rs}var Z=Pt.prototype;it.prototype={constructor:it,select:ms,selectAll:ys,selectChild:Z.selectChild,selectChildren:Z.selectChildren,filter:ls,merge:us,selection:_s,transition:Ps,call:Z.call,nodes:Z.nodes,node:Z.node,size:Z.size,empty:Z.empty,each:Z.each,on:ds,attr:Ko,attrTween:Zo,style:Es,styleTween:Ms,text:Ls,textTween:Ts,remove:gs,tween:Bo,delay:es,duration:is,ease:ss,easeVarying:cs,end:zs,[Symbol.iterator]:Z[Symbol.iterator]};function Ds(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Os={time:null,delay:0,duration:250,ease:Ds};function Fs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Bs(t){var e,n;t instanceof it?(e=t._id,t=t._name):(e=Gn(),(n=Os).time=Fe(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&oe(c,t,e,u,s,n||Fs(c,e));return new it(r,this._parents,t,e)}Pt.prototype.interrupt=Do;Pt.prototype.transition=Bs;const Bt=t=>()=>t;function qs(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function nt(t,e,n){this.k=t,this.x=e,this.y=n}nt.prototype={constructor:nt,scale:function(t){return t===1?this:new nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var se=new nt(1,0,0);Kn.prototype=nt.prototype;function Kn(t){for(;!t.__zoom;)if(!(t=t.parentNode))return se;return t.__zoom}function de(t){t.stopImmediatePropagation()}function Et(t){t.preventDefault(),t.stopImmediatePropagation()}function Hs(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Xs(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function mn(){return this.__zoom||se}function Vs(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ys(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gs(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Ks(){var t=Hs,e=Xs,n=Gs,r=Vs,i=Ys,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=No,u=ze("start","zoom","end"),f,l,h,p=500,y=150,x=0,w=10;function m(d){d.property("__zoom",mn).on("wheel.zoom",ot,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",ct).filter(i).on("touchstart.zoom",Rt).on("touchmove.zoom",fr).on("touchend.zoom touchcancel.zoom",hr).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(d,v,g,_){var b=d.selection?d.selection():d;b.property("__zoom",mn),d!==b?M(d,v,g,_):b.interrupt().each(function(){A(this,arguments).event(_).start().zoom(null,typeof v=="function"?v.apply(this,arguments):v).end()})},m.scaleBy=function(d,v,g,_){m.scaleTo(d,function(){var b=this.__zoom.k,E=typeof v=="function"?v.apply(this,arguments):v;return b*E},g,_)},m.scaleTo=function(d,v,g,_){m.transform(d,function(){var b=e.apply(this,arguments),E=this.__zoom,S=g==null?k(b):typeof g=="function"?g.apply(this,arguments):g,N=E.invert(S),$=typeof v=="function"?v.apply(this,arguments):v;return n(C(I(E,$),S,N),b,s)},g,_)},m.translateBy=function(d,v,g,_){m.transform(d,function(){return n(this.__zoom.translate(typeof v=="function"?v.apply(this,arguments):v,typeof g=="function"?g.apply(this,arguments):g),e.apply(this,arguments),s)},null,_)},m.translateTo=function(d,v,g,_,b){m.transform(d,function(){var E=e.apply(this,arguments),S=this.__zoom,N=_==null?k(E):typeof _=="function"?_.apply(this,arguments):_;return n(se.translate(N[0],N[1]).scale(S.k).translate(typeof v=="function"?-v.apply(this,arguments):-v,typeof g=="function"?-g.apply(this,arguments):-g),E,s)},_,b)};function I(d,v){return v=Math.max(o[0],Math.min(o[1],v)),v===d.k?d:new nt(v,d.x,d.y)}function C(d,v,g){var _=v[0]-g[0]*d.k,b=v[1]-g[1]*d.k;return _===d.x&&b===d.y?d:new nt(d.k,_,b)}function k(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function M(d,v,g,_){d.on("start.zoom",function(){A(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(_).end()}).tween("zoom",function(){var b=this,E=arguments,S=A(b,E).event(_),N=e.apply(b,E),$=g==null?k(N):typeof g=="function"?g.apply(b,E):g,V=Math.max(N[1][0]-N[0][0],N[1][1]-N[0][1]),P=b.__zoom,B=typeof v=="function"?v.apply(b,E):v,J=c(P.invert($).concat(V/P.k),B.invert($).concat(V/B.k));return function(q){if(q===1)q=B;else{var Q=J(q),ue=V/Q[2];q=new nt(ue,$[0]-Q[0]*ue,$[1]-Q[1]*ue)}S.zoom(null,q)}})}function A(d,v,g){return!g&&d.__zooming||new R(d,v)}function R(d,v){this.that=d,this.args=v,this.active=0,this.sourceEvent=null,this.extent=e.apply(d,v),this.taps=0}R.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,v){return this.mouse&&d!=="mouse"&&(this.mouse[1]=v.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=v.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=v.invert(this.touch1[0])),this.that.__zoom=v,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var v=Y(this.that).datum();u.call(d,this.that,new qs(d,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),v)}};function ot(d,...v){if(!t.apply(this,arguments))return;var g=A(this,v).event(d),_=this.__zoom,b=Math.max(o[0],Math.min(o[1],_.k*Math.pow(2,r.apply(this,arguments)))),E=lt(d);if(g.wheel)(g.mouse[0][0]!==E[0]||g.mouse[0][1]!==E[1])&&(g.mouse[1]=_.invert(g.mouse[0]=E)),clearTimeout(g.wheel);else{if(_.k===b)return;g.mouse=[E,_.invert(E)],Yt(this),g.start()}Et(d),g.wheel=setTimeout(S,y),g.zoom("mouse",n(C(I(_,b),g.mouse[0],g.mouse[1]),g.extent,s));function S(){g.wheel=null,g.end()}}function W(d,...v){if(h||!t.apply(this,arguments))return;var g=d.currentTarget,_=A(this,v,!0).event(d),b=Y(d.view).on("mousemove.zoom",$,!0).on("mouseup.zoom",V,!0),E=lt(d,g),S=d.clientX,N=d.clientY;eo(d.view),de(d),_.mouse=[E,this.__zoom.invert(E)],Yt(this),_.start();function $(P){if(Et(P),!_.moved){var B=P.clientX-S,J=P.clientY-N;_.moved=B*B+J*J>x}_.event(P).zoom("mouse",n(C(_.that.__zoom,_.mouse[0]=lt(P,g),_.mouse[1]),_.extent,s))}function V(P){b.on("mousemove.zoom mouseup.zoom",null),no(P.view,_.moved),Et(P),_.event(P).end()}}function ct(d,...v){if(t.apply(this,arguments)){var g=this.__zoom,_=lt(d.changedTouches?d.changedTouches[0]:d,this),b=g.invert(_),E=g.k*(d.shiftKey?.5:2),S=n(C(I(g,E),_,b),e.apply(this,v),s);Et(d),a>0?Y(this).transition().duration(a).call(M,S,_,d):Y(this).call(m.transform,S,_,d)}}function Rt(d,...v){if(t.apply(this,arguments)){var g=d.touches,_=g.length,b=A(this,v,d.changedTouches.length===_).event(d),E,S,N,$;for(de(d),S=0;S<_;++S)N=g[S],$=lt(N,this),$=[$,this.__zoom.invert($),N.identifier],b.touch0?!b.touch1&&b.touch0[2]!==$[2]&&(b.touch1=$,b.taps=0):(b.touch0=$,E=!0,b.taps=1+!!f);f&&(f=clearTimeout(f)),E&&(b.taps<2&&(l=$[0],f=setTimeout(function(){f=null},p)),Yt(this),b.start())}}function fr(d,...v){if(this.__zooming){var g=A(this,v).event(d),_=d.changedTouches,b=_.length,E,S,N,$;for(Et(d),E=0;E<b;++E)S=_[E],N=lt(S,this),g.touch0&&g.touch0[2]===S.identifier?g.touch0[0]=N:g.touch1&&g.touch1[2]===S.identifier&&(g.touch1[0]=N);if(S=g.that.__zoom,g.touch1){var V=g.touch0[0],P=g.touch0[1],B=g.touch1[0],J=g.touch1[1],q=(q=B[0]-V[0])*q+(q=B[1]-V[1])*q,Q=(Q=J[0]-P[0])*Q+(Q=J[1]-P[1])*Q;S=I(S,Math.sqrt(q/Q)),N=[(V[0]+B[0])/2,(V[1]+B[1])/2],$=[(P[0]+J[0])/2,(P[1]+J[1])/2]}else if(g.touch0)N=g.touch0[0],$=g.touch0[1];else return;g.zoom("touch",n(C(S,N,$),g.extent,s))}}function hr(d,...v){if(this.__zooming){var g=A(this,v).event(d),_=d.changedTouches,b=_.length,E,S;for(de(d),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),E=0;E<b;++E)S=_[E],g.touch0&&g.touch0[2]===S.identifier?delete g.touch0:g.touch1&&g.touch1[2]===S.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(S=lt(S,this),Math.hypot(l[0]-S[0],l[1]-S[1])<w)){var N=Y(this).on("dblclick.zoom");N&&N.apply(this,arguments)}}}return m.wheelDelta=function(d){return arguments.length?(r=typeof d=="function"?d:Bt(+d),m):r},m.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Bt(!!d),m):t},m.touchable=function(d){return arguments.length?(i=typeof d=="function"?d:Bt(!!d),m):i},m.extent=function(d){return arguments.length?(e=typeof d=="function"?d:Bt([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),m):e},m.scaleExtent=function(d){return arguments.length?(o[0]=+d[0],o[1]=+d[1],m):[o[0],o[1]]},m.translateExtent=function(d){return arguments.length?(s[0][0]=+d[0][0],s[1][0]=+d[1][0],s[0][1]=+d[0][1],s[1][1]=+d[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(d){return arguments.length?(n=d,m):n},m.duration=function(d){return arguments.length?(a=+d,m):a},m.interpolate=function(d){return arguments.length?(c=d,m):c},m.on=function(){var d=u.on.apply(u,arguments);return d===u?m:d},m.clickDistance=function(d){return arguments.length?(x=(d=+d)*d,m):Math.sqrt(x)},m.tapDistance=function(d){return arguments.length?(w=+d,m):w},m}let F=null;const pt=Y("#viz"),Un=()=>pt.node().clientWidth,Wn=()=>pt.node().clientHeight,ae=pt.append("g"),Jn=ae.append("g").attr("class","rings"),Us=ae.append("g").attr("class","links"),pe=ae.append("g").attr("class","nodes"),He=Ks().scaleExtent([.1,6]).on("zoom",t=>{ae.attr("transform",t.transform.toString())});pt.call(He);function yn(t){return t.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_\-\/]/g,"")}function Ws(t){const e=Math.max(0,...t.nodes.map(i=>i.level??0)),n=document.getElementById("stats");n.innerHTML="";const r=[["Nodes",String(t.nodes.length)],["Edges",String(t.edges.length)],["Levels",String(e+1)]];for(const[i,o]of r){const s=document.createElement("div");s.textContent=i;const a=document.createElement("div");a.textContent=o,n.appendChild(s),n.appendChild(a)}}let Xe=null,G=null;function ce(){let t=Xe;if(t===null&&G&&L){const e=L.nodes.find(n=>n.id===G);t=(e==null?void 0:e.level)??null}Jn.selectAll("circle.ring").classed("hovered",e=>t!==null&&e.level===t)}function te(t){Xe=t,ce()}function Js(t){return Math.max(24,t.length*7.2)}function Qs(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return(e>>>0)/4294967295}const Zs="rgba(148, 163, 184, 0.18)",js="rgba(148, 163, 184, 0.8)",ta="#fbbf24",ea="#22c55e",Ve="definit-db.learned",Ye="definit-db.ui.includedIds";function $e(){try{const t=localStorage.getItem(Ye);if(!t)return null;const e=JSON.parse(t);return Array.isArray(e)?new Set(e.filter(n=>typeof n=="string")):null}catch{return null}}function Qn(t){try{localStorage.setItem(Ye,JSON.stringify(Array.from(t)))}catch{}}function na(){try{const t=localStorage.getItem(Ve);if(!t)return new Set;const e=JSON.parse(t);return Array.isArray(e)?new Set(e.filter(n=>typeof n=="string")):new Set}catch{return new Set}}function Zn(){try{localStorage.setItem(Ve,JSON.stringify(Array.from(bt)))}catch{}}function ra(){bt.clear();try{localStorage.removeItem(Ve)}catch{}}const bt=na(),jn="definit-db.ui.infoDismissed",ia=`Welcome to the "Data Structures and Algorithms" course!

This is a great starting point if you are preparing for coding interviews. The tool helps you learn or review key definitions related to data structures and algorithms.

The definitions are based on Cracking the Coding Interview by Gayle Laakmann McDowell. A total of 275 terms from mathematics and computer science are organized topologically to create a smooth and logical learning experience.

Give it a try, take it easy, and have fun! Feedback is always appreciated. Feel free to contact me at janbielecki94@gmail.com.`;function oa(){try{return localStorage.getItem(jn)==="1"}catch{return!1}}function vn(t){try{localStorage.setItem(jn,t?"1":"0")}catch{console.warn("Failed to write info dismissed state to storage.")}}function _n(){return bt.size>0}let Gt=null;function sa(){const t=document.getElementById("infoOverlay"),e=document.getElementById("infoFab"),n=document.getElementById("infoClose"),r=document.getElementById("infoBody");if(!t||!e||!n||!r)return;r.textContent=ia;const i=()=>{t.classList.add("open")},o=()=>{t.classList.remove("open"),vn(!0)};e.onclick=s=>{s.preventDefault(),s.stopPropagation(),i()},n.onclick=s=>{s.preventDefault(),s.stopPropagation(),o()},t.addEventListener("click",s=>{s.target===t&&o()}),window.addEventListener("keydown",s=>{s.key==="Escape"&&t.classList.contains("open")&&o()}),!_n()&&!oa()&&setTimeout(()=>i(),60),Gt=()=>{_n()||vn(!1)}}sa();let z=$e();function Ge(t){const e=new Set;for(const n of t.def.nodes){if(T(n)!=="ready")continue;const r=rt(n.category),i=Math.max(1,r.length-1),o=$t(r,i);o&&e.add(o)}if(!e.size){console.log("No ready categories found."),z=null;try{localStorage.removeItem(Ye)}catch{console.warn("Failed to clear included IDs from storage.")}return}z=new Set;for(const n of t.def.nodes)T(n)==="learned"&&z.add(n.id);for(const n of t.def.nodes){const r=rt(n.category),i=Math.max(1,r.length-1),o=$t(r,i);o&&e.has(o)&&z.add(n.id)}console.log(`  Found ${z.size} included definitions.`),Qn(z)}function Kt(t){return z?z.has(t):!0}function aa(t,e){tr([t],e)}function tr(t,e){z||(z=new Set(((F==null?void 0:F.def.nodes)??[]).map(n=>n.id))),z||(z=new Set);for(const n of t)e?z.add(n):z.delete(n);Qn(z)}function T(t){return bt.has(t.id)?"learned":(t.deps??[]).every(r=>bt.has(r))?"ready":"off"}function ca(t){return t==="learned"?ea:t==="ready"?ta:t==="visible"?js:Zs}let er=null;function nr(t){const e=Un(),n=Wn(),r=e/2,i=n/2,o=Math.max(0,...t.nodes.map(p=>p.level??0)),s=Math.max(6,...t.nodes.map(p=>{var y;return((y=p.title)==null?void 0:y.length)??0})),a=Math.max(54,Math.min(120,30+s*2.4)),c=56,u=yr(t.nodes,p=>p.level??0),f=new Map,l=p=>(Qs(String(p))*.9+p*.37)%(Math.PI*2),h=(p,y,x)=>{if(p.length<=1)return x;const w=x.slice(),I=p.map(k=>Js(k.title)).map(k=>(k+18)/Math.max(1,y)),C=22;for(let k=0;k<C;k++){const M=xn(p.length).sort((A,R)=>w[A]-w[R]);for(let A=0;A<M.length;A++){const R=M[A],ot=M[(A+1)%M.length];let W=w[ot]-w[R];W<0&&(W+=Math.PI*2);const ct=(I[R]+I[ot])/2;if(W<ct){const Rt=(ct-W)/2;w[R]-=Rt,w[ot]+=Rt}}}for(let k=0;k<w.length;k++)w[k]=(w[k]%(Math.PI*2)+Math.PI*2)%(Math.PI*2);return w};for(let p=0;p<=o;p++){const y=(u.get(p)??[]).slice().sort((k,M)=>k.id.localeCompare(M.id)),x=y.length;if(!x)continue;const w=c+p*a,m=l(p);let I;x===2?I=[m+Math.PI/4,m+(Math.PI+Math.PI/4)]:x===3?I=[0,1,2].map(k=>m+k/3*Math.PI*2+Math.PI/6):I=y.map((k,M)=>m+M/x*Math.PI*2);const C=h(y,w,I);for(let k=0;k<x;k++){const M=y[k],A=C[k];f.set(M.id,{x:r+w*Math.cos(A),y:i+w*Math.sin(A)})}}return{cx:r,cy:i,ringGap:a,base:c,maxLevel:o,pos:f}}function Ke(t){const e=new Map(t.map(o=>[o.id,o])),n=new Set,r=new Set,i=o=>{const s=e.get(o);if(!s)return 0;if(r.has(o))return s.level??0;if(n.has(o))return 0;n.add(o);let a=0;for(const c of s.deps??[])e.has(c)&&(a=Math.max(a,1+i(c)));return n.delete(o),r.add(o),s.level=a,a};for(const o of t)i(o.id)}function rr(t){var c,u;const e=new Set(t.childrenByPrefix.keys());console.log(`Computing group levels for ${e.size} groups.`);const n=new Map;for(const f of e)n.set(f,new Set);const r=(f,l)=>{const h=rt(f);return h.length<l||l>h.length-1?null:$t(h,l)};for(const f of t.def.nodes){const l=rt(f.category);for(const h of f.deps??[]){const p=(c=t.byId.get(h))==null?void 0:c.category;if(!p)throw new Error(`Dependency id not found: ${h}`);const y=rt(p),x=Math.min(l.length-1,y.length-1);for(let w=1;w<=x;w++){const m=r(f.category,w),I=r(p,w);!m||!I||m!==I&&((u=n.get(m))==null||u.add(I))}}}const i=new Map,o=new Set,s=new Set,a=f=>{const l=i.get(f);if(l!==void 0)return l;if(s.has(f))return i.get(f)??0;if(o.has(f))return 0;o.add(f);let h=0;for(const p of n.get(f)??[])h=Math.max(h,a(p)+1);return o.delete(f),s.add(f),i.set(f,h),h};for(const f of e)a(f);return{depsByGroup:n,levelByGroup:i}}function la(t,e){const n=t.groupLevel??0,r=e.groupLevel??0;return n!==r?n-r:t.name.localeCompare(e.name)}function ua(t){Ke(t.nodes),Ws(t);const e=nr(t);er=e;const n=new Set;{const l=new Map(t.nodes.map(h=>[h.id,h]));for(const h of t.edges){const p=l.get(h.target);if(!p||T(p)!=="learned")continue;const y=l.get(h.source);if(!y)continue;T(y)==="off"&&n.add(y.id)}}const r=xn(0,e.maxLevel+1).map(l=>({level:l,r:e.base+l*e.ringGap}));Jn.selectAll("circle.ring").data(r,l=>String(l.level)).join(l=>l.append("circle").attr("class","ring")).attr("cx",e.cx).attr("cy",e.cy).attr("r",l=>l.r),ce();const i=l=>{const h=e.pos.get(l.source),p=e.pos.get(l.target);if(!h||!p)return"";const y=(h.x+p.x)/2,x=(h.y+p.y)/2,w=.55,m=y+(e.cx-y)*w,I=x+(e.cy-x)*w;return`M${h.x},${h.y} Q${m},${I} ${p.x},${p.y}`},o=new Map(t.nodes.map(l=>[l.id,l]));Us.selectAll("path.link").data(t.edges,l=>`${l.source}->${l.target}`).join(l=>l.append("path").attr("class","link").attr("fill","none").attr("stroke-linecap","round").attr("stroke-linejoin","round")).attr("d",i).classed("link-on",l=>{const h=o.get(l.target);return(h?T(h):"off")==="learned"}).classed("link-off",l=>{const h=o.get(l.target);return(h?T(h):"off")!=="learned"}).attr("stroke",l=>{const h=o.get(l.target);return(h?T(h):"off")==="learned"?"rgba(226, 232, 240, 0.85)":"rgba(148, 163, 184, 0.16)"}).attr("stroke-width",l=>{const h=o.get(l.target);return(h?T(h):"off")==="learned"?2.2:1}).attr("stroke-dasharray",l=>{const h=o.get(l.target);return(h?T(h):"off")==="learned"?null:"3 5"}).attr("opacity",1);const a=pe.selectAll("g.node").data(t.nodes,l=>l.id).join(l=>{const h=l.append("g").attr("class","node"),p=8,y=11;return h.append("circle").attr("class","node-circle").attr("r",p),h.append("circle").attr("class","leaf-underline").attr("r",y+4),h.append("text").attr("dx",12).attr("dy",5),h.append("title"),h});a.select("title").text(l=>`${l.title} (level: ${l.level??0})
${l.category}`),a.on("mouseenter",(l,h)=>{Y(l.currentTarget).classed("hovering",!0),te(h.level??0)}).on("mouseleave",l=>{Y(l.currentTarget).classed("hovering",!1),te(null),G&&pe.selectAll("g.node").filter(p=>p.id===G).classed("hovering",!0)}),G&&pe.selectAll("g.node").classed("hovering",l=>Xe===null&&l.id===G),a.attr("transform",l=>{const h=e.pos.get(l.id);return`translate(${h.x},${h.y})`});const c=l=>{const h=T(l),p=h==="off"&&n.has(l.id)?"visible":h;return ca(p)},u=l=>{const h=T(l);return h==="off"&&n.has(l.id)?"visible":h};a.select("circle.node-circle").attr("display",l=>null).attr("fill",l=>c(l)).attr("opacity",1),a.select("circle.leaf-underline").attr("fill","none").attr("stroke",l=>c(l)).attr("stroke-width",l=>2).attr("opacity",l=>.9),a.select("text").text(l=>l.title).attr("fill","#e6edf3").attr("opacity",l=>u(l)==="off"?.22:1).attr("text-decoration","none").attr("text-decoration-thickness",null).attr("text-underline-offset",null),ba(a);const f=document.getElementById("search");f.oninput=()=>{const l=yn(f.value),h=p=>l&&yn(p.id).includes(l);a.selectAll("circle.node-circle").attr("stroke",p=>h(p)?"#ef4444":"none").attr("stroke-width",p=>h(p)?2.5:1)}}const ir=document.getElementById("viewer"),or=document.getElementById("viewerTitle"),ee=document.getElementById("viewerPath"),Te=document.getElementById("viewerBody"),ut=document.getElementById("markLearned");function sr(t){if(!ut)return;if(!t){ut.style.display="none",ut.disabled=!0,ut.onclick=null;return}const e=T(t);ut.style.display="",ut.disabled=e!=="ready",ut.onclick=()=>{T(t)==="ready"&&(bt.add(t.id),Zn(),F&&Ge(F),gt(!0),_t.selectedLeaf=void 0,G=null,Ue(),requestAnimationFrame(()=>{Tt()}))}}function ge(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}function fa(t){const e=t.replace(/\r\n?/g,`
`).split(`
`),n=[];let r=0;for(;r<e.length&&!e[r].trim();)r++;for(r<e.length&&/^#{1,2}\s+/.test(e[r].trim())&&r++;r<e.length;r++)n.push(e[r]);for(;n.length&&!n[0].trim();)n.shift();for(;n.length&&!n[n.length-1].trim();)n.pop();const i=[];let o=0;for(const s of n){if(!s.trim()){o++,o<=2&&i.push("");continue}o=0,i.push(s)}return i.join(`
`)}function le(t){if(!L)return;const e=L.nodes.find(n=>n.id===t);e&&(_t.selectedLeaf=t,G=t,gt(!0),requestAnimationFrame(()=>{Ea(t)}),cr(e))}function ha(t){le(t)}function da(t){var r;const e=new Map,n=new Map(((L==null?void 0:L.nodes)??[]).map(i=>[i.id,i]));for(const i of t){const o=((r=n.get(i))==null?void 0:r.title)??i.split("/").at(-1)??i;e.set(i,{id:i,title:o})}return e}function pa(t,e){const n=fa(t),r=da(e),i=/\[([^\]]+)\]\(([^)]+)\)/g,s=n.replace(i,(a,c,u)=>{const f=String(c??"").trim(),l=String(u??"").trim();let h;if(r.has(l)&&(h=l),!h&&l.includes("/")){const y="/"+l.split("/").filter(Boolean).pop(),x=l.split("/")[0],w=Array.from(r.keys()).filter(m=>m.startsWith(x+"/")&&m.endsWith(y));w.length===1&&(h=w[0])}if(!h)return ge(f||l);const p=r.get(h);return`<span class="dep" data-dep="${ge(p.id)}">${ge(p.title)}</span>`}).split(/\n\s*\n+/g).map(a=>a.replace(/\s*\n\s*/g," ").trim()).filter(Boolean);Te.innerHTML=s.map(a=>`<p>${a}</p>`).join(""),Te.querySelectorAll("span.dep[data-dep]").forEach(a=>{a.onclick=c=>{c.preventDefault(),c.stopPropagation();const u=a.dataset.dep;u&&ha(u)}})}function ga(t,e){ir.style.display="",or.textContent=t.title,ee.style.display="",ee.textContent=t.category,pa(e,t.deps??[]),sr(t)}function Ue(){ir.style.display="",or.textContent="Content",ee.textContent="",ee.style.display="none",Te.innerHTML='<p style="margin:0; color:#a9b4c0;">Select a definition to show the content.</p>',sr(void 0)}function rt(t){return t.split("/").filter(Boolean)}function $t(t,e){return t.slice(0,e).join("/")}function ma(t){console.log("Building raw data structure...");const e=new Map(t.nodes.map(o=>[o.id,o])),n=new Set;for(const o of t.nodes){const[s]=rt(o.category);s&&n.add(s)}const r=Array.from(n).sort();console.log(`  Found ${r.length} fields: ${r.join(", ")}`);const i=new Map;for(const o of t.nodes){const s=rt(o.category);for(let a=1;a<=s.length-1;a++){const c=$t(s,a),u=i.get(c)??[];u.push(o.id),i.set(c,u)}}for(const[o,s]of i)i.set(o,Array.from(new Set(s)).sort());return{def:t,byId:e,childrenByPrefix:i,fields:r}}const ar="definit-db.ui.categories.openPrefixes";function ya(){try{const t=localStorage.getItem(ar);if(!t)return new Set;const e=JSON.parse(t);return Array.isArray(e)?new Set(e.filter(n=>typeof n=="string")):new Set}catch{return new Set}}function va(t){try{localStorage.setItem(ar,JSON.stringify(Array.from(t)))}catch{}}let qt=ya();function wn(t){return t==="ready"?0:t==="learned"?1:t==="visible"?2:3}function _a(t){const e=new Set,n=new Map(t.nodes.map(r=>[r.id,r]));for(const r of t.edges){const i=n.get(r.target);if(!i||T(i)!=="learned")continue;const o=n.get(r.source);o&&T(o)==="off"&&e.add(o.id)}return e}function Pe(t,e){const n=T(t);return n==="off"&&e.has(t.id)?"visible":n}function wa(t,e){const n=t.byId,r=_a(e),{levelByGroup:i}=rr(t),o={id:"",name:"",kind:"group",depth:0,children:[],groupLevel:0};for(const a of t.def.nodes){const c=rt(a.category);let u=o;for(let l=0;l<c.length-1;l++){const h=c.slice(0,l+1).join("/");let p=u.children.find(y=>y.kind==="group"&&y.id===h);p?p.groupLevel=i.get(h)??p.groupLevel??0:(p={id:h,name:c[l],kind:"group",depth:l+1,children:[],groupLevel:i.get(h)??0},u.children.push(p)),u=p}const f={id:a.id,name:c.at(-1)??a.id,kind:"leaf",depth:c.length,children:[],leaf:n.get(a.id)??a};u.children.push(f)}const s=a=>{for(const c of a.children)s(c);a.children.sort((c,u)=>{if(c.kind!==u.kind)return c.kind==="group"?-1:1;if(c.kind==="group"&&u.kind==="group")return la(c,u);const f=c.leaf,l=u.leaf,h=Pe(f,r),p=Pe(l,r),y=wn(h),x=wn(p);if(y!==x)return y-x;const w=f.level??0,m=l.level??0;return w!==m?w-m:(f.title??f.id).localeCompare(l.title??l.id)})};return s(o),{root:o,visibleNodeIds:r}}function Mt(t,e){const n=document.getElementById("categoriesTree");if(!n)return;const{root:r,visibleNodeIds:i}=wa(t,e);n.innerHTML="";const o=u=>u?!qt.has(u):!0,s=(u,f)=>{u&&(f?qt.delete(u):qt.add(u),va(qt))},a=u=>u?t.childrenByPrefix.get(u)??[]:t.def.nodes.map(f=>f.id),c=u=>{const f=u.kind==="group"?o(u.id):!0;if(u.id!==""){const l=document.createElement("div");l.className="treeRow",l.style.setProperty("--indent",String(Math.max(0,u.depth-1)));const h=document.createElement("span");h.className="treeIndent",l.appendChild(h);const p=document.createElement("span");p.className="treeChevron",p.textContent="",l.appendChild(p);const y=document.createElement("input");y.type="checkbox",y.className="treeCheckbox";const x=document.createElement("span");x.className="treeLabel";const w=document.createElement("span");if(w.className="treeMeta",u.kind==="group"){const m=a(u.id),I=m.length?m.every(M=>Kt(M)):!0,C=m.some(M=>Kt(M));y.checked=I,y.indeterminate=C&&!I,x.textContent=u.name,l.classList.add("hasChildren"),l.classList.add("clickable"),p.classList.toggle("open",f),l.onclick=M=>{const A=M.target;A&&A.tagName==="INPUT"||(s(u.id,!f),Mt(t,L??e))},y.onchange=()=>{const M=y.checked;tr(m,M),gt(!0),Mt(t,L??e)},w.textContent="";const k=document.createElement("span");k.textContent=`L${u.groupLevel??0}`,w.appendChild(k)}else{const m=u.leaf;y.checked=Kt(m.id);const I=Pe(m,i),C=document.createElement("span");C.className=`stateDot ${I}`,w.appendChild(C);const k=document.createElement("span");k.textContent=`L${m.level??0}`,w.appendChild(k),x.textContent=m.title,l.classList.add("clickable"),l.onclick=M=>{const A=M.target;A&&A.tagName==="INPUT"||(mt("definition"),le(m.id),at&&!at.classList.contains("expanded")&&ne(!1))},y.onchange=()=>{aa(m.id,y.checked),gt(!0),Mt(t,L??e)}}l.appendChild(y),l.appendChild(x),l.appendChild(w),n.appendChild(l)}if(u.kind==="group"&&f)for(const l of u.children)c(l)};c(r)}function xa(t,e){const n=a=>Kt(a),r=t.def.nodes.filter(a=>n(a.id)).map(a=>({...a,level:0})),i=new Set(r.map(a=>a.id)),o=t.def.edges.filter(a=>i.has(a.source)&&i.has(a.target)).map(a=>({...a})),s=new Map;for(const a of o){const c=s.get(a.source)??[];c.push(a.target),s.set(a.source,c)}for(const a of r)a.deps=s.get(a.id)??a.deps??[],a.level=0;return Ke(r),{nodes:r,edges:o}}function ba(t){t.on("click.interact",(e,n)=>{e.preventDefault(),e.stopPropagation(),mt("definition"),le(n.id)})}const ka=fetch("./defs.json").then(t=>t.json()).then(t=>ma(t)),_t={selectedLeaf:void 0};let L=null;function Tt(){if(!L)return;const t=Math.max(0,...L.nodes.map(n=>n.level??0));let e=t;for(let n=t;n>=0;n--)if(L.nodes.some(i=>{if((i.level??0)!==n)return!1;const o=T(i);return o==="ready"||o==="learned"})){e=n;break}We(e),te(e)}function gt(t){const e=t?Kn(pt.node()):null;ka.then(n=>{F=n,console.log(`Rendering graph with ${n.def.nodes.length} definitions...`),$e()===null?Ge(n):z=$e();const r=xa(n);if(L=r,ua(r),e&&pt.call(He.transform,e),ce(),_t.selectedLeaf||(at&&!at.classList.contains("expanded")&&ne(!1),ur(n,r)||requestAnimationFrame(()=>{Tt()})),_t.selectedLeaf){const i=r.nodes.find(o=>o.id===_t.selectedLeaf);i&&cr(i)}Mt(n,r)}).catch(n=>{console.error(n)})}function We(t){if(!L)return;const e=er??nr(L),n=e.base+t*e.ringGap,r=60,i=Un(),o=Wn(),s=2*n+r,a=Math.max(.12,Math.min(6,Math.min(i/s,o/s))),c=i/2-e.cx*a,u=o/2-e.cy*a;pt.transition().duration(650).call(He.transform,se.translate(c,u).scale(a))}function Ea(t){if(!L)return;const e=L.nodes.find(n=>n.id===t);e&&We(e.level??0)}async function cr(t){G=t.id,ce();const e=t.content||"(no content)";ga(t,e)}gt(!1);const lr="definit-db.ui.bottomPanelCollapsed",at=document.getElementById("bottomPanel"),yt=document.getElementById("togglePanel"),me=document.getElementById("mainPanel");function ne(t){if(!(!at||!yt||!(yt.getAttribute("aria-expanded")!==String(!t)))){at.classList.toggle("expanded",!t),me==null||me.classList.toggle("expanded",!t),yt.textContent=t?"":"",yt.setAttribute("aria-expanded",String(!t));try{localStorage.setItem(lr,t?"1":"0")}catch{}requestAnimationFrame(()=>{Tt()})}}if(at&&yt){let t=!1;try{t=localStorage.getItem(lr)==="1"}catch{t=!1}ne(t),yt.addEventListener("click",e=>{e.preventDefault();const n=!at.classList.contains("expanded");ne(!n)})}const j=document.getElementById("tabDefinition"),tt=document.getElementById("tabCategories"),et=document.getElementById("tabGraph"),ye=document.getElementById("tabPageDefinition"),ve=document.getElementById("tabPageCategories"),_e=document.getElementById("tabPageGraph");function mt(t){const e=t==="definition",n=t==="categories",r=t==="graph";j==null||j.classList.toggle("active",e),tt==null||tt.classList.toggle("active",n),et==null||et.classList.toggle("active",r),j==null||j.setAttribute("aria-selected",String(e)),tt==null||tt.setAttribute("aria-selected",String(n)),et==null||et.setAttribute("aria-selected",String(r)),ye==null||ye.classList.toggle("active",e),ve==null||ve.classList.toggle("active",n),_e==null||_e.classList.toggle("active",r),n&&F&&L&&Mt(F,L)}j==null||j.addEventListener("click",t=>{t.preventDefault(),mt("definition")});tt==null||tt.addEventListener("click",t=>{t.preventDefault(),mt("categories")});et==null||et.addEventListener("click",t=>{t.preventDefault(),mt("graph")});mt("definition");const we=document.getElementById("progress");we==null||we.addEventListener("click",()=>{_t.selectedLeaf=void 0,G=null,Ue(),F&&Ge(F),gt(!0),requestAnimationFrame(()=>{F&&L&&ur(F,L)||Tt()})});const xe=document.getElementById("overview")??document.getElementById("focus");xe==null||xe.addEventListener("click",()=>{if(!L)return;const t=Math.max(0,...L.nodes.map(e=>e.level??0));We(t),te(t)});const be=document.getElementById("resetProgress")??document.getElementById("reset");be==null||be.addEventListener("click",()=>{console.log("Resetting progress..."),ra(),Zn(),Ue(),Gt==null||Gt(),gt(!0)});function ur(t,e){Ke(e.nodes);const n=e.nodes.filter(o=>T(o)==="ready");if(!n.length)return!1;const{levelByGroup:r}=rr(t),i=o=>{const s=rt(o),a=Math.max(1,s.length-1),c=$t(s,a);return c?r.get(c)??0:0};return n.sort((o,s)=>{const a=o.level??0,c=s.level??0;if(a!==c)return a-c;const u=i(o.category),f=i(s.category);return u!==f?u-f:o.id.localeCompare(s.id)}),mt("definition"),le(n[0].id),!0}
