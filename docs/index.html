<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DefinIT - Data Structures and Algorithms</title>
  <style>
    html,
    body {
      height: 100%;
      margin: 0;
    }

    body {
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: #0b0f19;
      color: #e6edf3;
      overflow: hidden;
    }

    #app {
      height: 100%;
      display: grid;
      place-items: center;
      padding: 10px;
      box-sizing: border-box;
    }

    .viewport {
      width: min(1100px, 100%);
      height: 100%;
      display: grid;
      grid-template-rows: auto 1fr auto;
      min-height: 0;
      position: relative;
    }

    .topMenu {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      padding: 10px 12px;
      border: 1px solid rgba(31, 42, 68, 0.9);
      border-bottom: none;
      background: rgba(11, 15, 25, 0.92);
      backdrop-filter: blur(6px);
      border-top-left-radius: 14px;
      border-top-right-radius: 14px;
      margin: 0;
      box-sizing: border-box;
      width: 100%;
    }

    .mainPanel {
      min-height: 0;
      display: grid;
      grid-template-rows: 1fr;
    }

    .mainPanel.expanded {
      grid-template-rows: 1fr 1fr;
      /* expanded: 50/50 split */
    }

    .canvasArea {
      position: relative;
      min-height: 0;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 0;
    }

    /* Canvas fills all available space */
    .canvasWrap {
      width: 100%;
      height: 100%;
      border: 1px solid rgba(31, 42, 68, 0.9);
      border-top: none;
      border-bottom: none;
      overflow: hidden;
      background: radial-gradient(1200px 800px at 50% 40%, rgba(30, 58, 138, 0.10), rgba(15, 23, 42, 0.0)), #0b0f19;
    }

    /* Bottom panel participates in layout (not overlay). Hidden when not expanded. */
    .bottomPanel {
      position: relative;
      left: auto;
      right: auto;
      top: auto;
      bottom: auto;

      display: none;
      flex-direction: column;
      min-height: 0;
      overflow: hidden;
    }

    .bottomPanel.expanded {
      display: flex;
    }

    /* Keep it a rectangle by constraining the max width; height comes from layout */
    @media (min-width: 900px) {
      .canvasWrap {
        border-left: 1px solid rgba(31, 42, 68, 0.9);
        border-right: 1px solid rgba(31, 42, 68, 0.9);
      }
    }

    svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #24314f;
      background: #0f1526;
      color: #e6edf3;
      box-sizing: border-box;
      max-width: 100%;
    }

    .btn {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #24314f;
      background: #121a2f;
      color: #e6edf3;
      cursor: pointer;
      user-select: none;
    }

    .btn:hover {
      background: #162040;
    }

    .btn.active {
      background: #1a2850;
      border-color: #35518f;
    }

    .btn:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      background: #0f1526;
    }

    .btn:disabled:hover {
      background: #0f1526;
    }

    .bottomMenu {
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: flex-start;
      padding: 8px 8px 10px 8px;
      border: 1px solid rgba(31, 42, 68, 0.9);
      border-top: none;
      background: rgba(11, 15, 25, 0.92);
      backdrop-filter: blur(6px);
      border-bottom-left-radius: 14px;
      border-bottom-right-radius: 14px;
      box-sizing: border-box;
    }

    .bottomMenu input[type="text"] {
      flex: 1 1 auto;
      min-width: 0;
    }

    .bottomPanelMenu {
      display: flex;
      gap: 8px;
      padding: 6px;
      border: 1px solid rgba(31, 42, 68, 0.9);
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.55);
      backdrop-filter: blur(6px);
      position: sticky;
      top: 0;
      z-index: 2;
      flex: 0 0 auto;
    }

    .tabBtn {
      flex: 1 1 0;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #24314f;
      background: #121a2f;
      color: #e6edf3;
      cursor: pointer;
    }

    .tabBtn:hover {
      background: #162040;
    }

    .tabBtn.active {
      background: #1a2850;
      border-color: #35518f;
    }

    .tabPage {
      display: none;
      min-height: 0;
    }

    .tabPage.active {
      display: block;
    }

    .bottomPanelContent {
      padding: 10px 12px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      flex-wrap: nowrap;
      align-items: stretch;
      justify-content: flex-start;

      background: rgba(11, 15, 25, 0.92);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(31, 42, 68, 0.9);
      border-radius: 14px;
      box-sizing: border-box;

      min-height: 0;
      height: 100%;
      max-height: 100%;
      overflow: auto;
    }

    /* Avoid forcing fixed height on panel sections; let tab page manage scrolling */
    .tabPage .panelSection {
      height: auto;
      min-height: 0;
    }

    .categoriesTree {
      font-size: 12px;
      line-height: 1.55;
      user-select: none;
    }

    .treeRow {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 2px 2px;
      border-radius: 6px;
      cursor: default;
    }

    .treeRow:hover {
      background: rgba(30, 58, 138, 0.10);
    }

    .treeRow.clickable {
      cursor: pointer;
    }

    .treeIndent {
      width: calc(var(--indent, 0) * 14px);
      flex: 0 0 auto;
    }

    .treeChevron {
      width: 14px;
      height: 14px;
      display: inline-grid;
      place-items: center;
      color: #a9b4c0;
      flex: 0 0 auto;
      visibility: hidden;
    }

    .treeRow.hasChildren .treeChevron {
      visibility: visible;
    }

    .treeChevron.open {
      transform: rotate(90deg);
    }

    .treeCheckbox {
      width: 14px;
      height: 14px;
      accent-color: #38bdf8;
      flex: 0 0 auto;
    }

    .treeLabel {
      flex: 1 1 auto;
      min-width: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .treeMeta {
      flex: 0 0 auto;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #a9b4c0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
    }

    .stateDot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      display: inline-block;
    }

    .stateDot.off {
      background: rgba(148, 163, 184, 0.45);
    }

    .stateDot.visible {
      background: rgba(148, 163, 184, 0.95);
    }

    .stateDot.ready {
      background: #fbbf24;
    }

    .stateDot.learned {
      background: #22c55e;
    }

    .viewerBody {
      font-size: 12px;
      line-height: 1.45;
      color: #e6edf3;
      white-space: normal;
    }

    .viewerBody p {
      margin: 0 0 8px 0;
    }

    .viewer .path {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color: #a9b4c0;
      margin-bottom: 8px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .viewerBody .dep {
      color: #7dd3fc;
      cursor: pointer;
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 2px;
    }

    .viewerBody .dep:hover {
      color: #bae6fd;
    }

    .viewerActions {
      margin-top: 10px;
      display: flex;
      gap: 8px;
      justify-content: flex-start;
    }

    /* Visualization styles */
    .node .node-circle {
      vector-effect: non-scaling-stroke;
    }

    .node text {
      fill: #e6edf3;
      font-size: 11px;
      pointer-events: none;
    }

    .link {
      fill: none;
    }

    .link.link-on {
      stroke: rgba(226, 232, 240, 0.4);
      stroke-width: 1;
    }

    .link.link-off {
      stroke: rgba(148, 163, 184, 0.16);
      stroke-width: 1;
      stroke-dasharray: 3 5;
    }

    .ring {
      stroke: rgba(56, 189, 248, 0.10);
      fill: none;
    }

    @keyframes pulseNode {
      0% {
        transform: scale(1);
        opacity: 0.9;
      }

      50% {
        transform: scale(1.9);
        opacity: 1;
      }

      100% {
        transform: scale(1);
        opacity: 0.9;
      }
    }

    .node.hovering .node-circle {
      transform-box: fill-box;
      transform-origin: center;
      animation: pulseNode 900ms ease-in-out infinite;
      filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.18));
    }

    .ring.hovered {
      stroke: rgba(56, 189, 248, 0.55);
      stroke-width: 2px;
    }

    .panelSection h3 {
      margin: 0 0 8px 0;
      font-size: 13px;
      color: #e6edf3;
    }

    .dagStats {
      display: grid;
      grid-template-columns: 130px 1fr;
      gap: 6px 10px;
      font-size: 13px;
    }

    .dagStats div:nth-child(odd) {
      color: #a9b4c0;
    }
  </style>
  <script type="module" crossorigin src="./assets/index-txKYMXbv.js"></script>
</head>

<body>
  <div id="app">
    <div class="viewport">
      <div class="topMenu">
        <button id="progress" class="btn">Current progress</button>
        <button id="overview" class="btn">Full graph</button>
        <button id="resetProgress" class="btn">Reset progress</button>
      </div>

      <div id="mainPanel" class="mainPanel">
        <div class="canvasArea">
          <div class="canvasWrap">
            <svg id="viz"></svg>
          </div>
        </div>

        <div id="bottomPanel" class="bottomPanel">
          <div class="bottomPanelContent">
            <div class="bottomPanelMenu" role="tablist" aria-label="Bottom panel tabs">
              <button id="tabDefinition" class="tabBtn active" type="button" role="tab" aria-selected="true" aria-controls="tabPageDefinition">Definition</button>
              <button id="tabCategories" class="tabBtn" type="button" role="tab" aria-selected="false" aria-controls="tabPageCategories">Categories</button>
              <button id="tabGraph" class="tabBtn" type="button" role="tab" aria-selected="false" aria-controls="tabPageGraph">Graph</button>
            </div>

            <div id="tabPageDefinition" class="tabPage active" role="tabpanel" aria-labelledby="tabDefinition">
              <div class="panelSection viewer" id="viewer">
                <h3 id="viewerTitle">Content</h3>
                <div class="path" id="viewerPath" style="display:none;"></div>
                <div id="viewerBody" class="viewerBody">
                  <p style="margin:0; color:#a9b4c0;">Select a definition to show the content.</p>
                </div>
                <div class="viewerActions">
                  <button id="markLearned" class="btn" style="display:none;">Mark as learned</button>
                </div>
              </div>
            </div>

            <div id="tabPageCategories" class="tabPage" role="tabpanel" aria-labelledby="tabCategories">
              <div class="panelSection">
                <h3>Categories</h3>
                <div id="categoriesTree" class="categoriesTree"></div>
              </div>
            </div>

            <div id="tabPageGraph" class="tabPage" role="tabpanel" aria-labelledby="tabGraph">
              <div class="panelSection">
                <h3>Graph details</h3>
                <div class="dagStats" id="stats"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="bottomMenu">
        <button id="togglePanel" class="btn" aria-expanded="false" aria-controls="bottomPanel" aria-label="Toggle bottom panel">â–²</button>
        <input id="search" type="text" placeholder="Search node by id/title..." />
      </div>
    </div>
  </div>


</body>

</html>